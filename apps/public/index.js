var nl=class{constructor(t){this.text=t}};var Om=Symbol.for("@effect/html/data/Interpolation"),ue="is\xB5",Fm={$:{},InvalidTemplateException:nl};var It=Symbol.for("@effect/html/data/Placeholder/Generic"),PE=Symbol.for("@effect/html/data/Placeholder/Generic/R");var ud,rd,So=class{constructor(t,s,o){this.type=t,this.template=s,this.values=o,this[ud]=Om,this[rd]=It}};ud=Om,rd=It;function Vu(e,t,s){return new So(e,t,s.toArray)}function nd(e){return Array.from(e)}function vo(e){return e==null}var W2=335903614,H2=4150755663,T2=1481765933>>>0,U2=1284865837>>>0,$2=9007199254740992,P2=134217728,wo=class{constructor(t,s,o,u){return vo(s)&&vo(t)?(s=Math.random()*4294967295>>>0,t=0):vo(s)&&(s=t,t=0),vo(u)&&vo(o)?(u=this._state?this._state[3]:H2,o=this._state?this._state[2]:W2):vo(u)&&(u=o,o=0),this._state=new Int32Array([0,0,o>>>0,((u||0)|1)>>>0]),this._next(),id(this._state,this._state[0],this._state[1],t>>>0,s>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(t){this._state[0]=t[0],this._state[1]=t[1],this._state[2]=t[2],this._state[3]=t[3]|1}_next(){let t=this._state[0]>>>0,s=this._state[1]>>>0;D2(this._state,t,s,T2,U2),id(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let o=t>>>18,u=(s>>>18|t<<14)>>>0;o=(o^t)>>>0,u=(u^s)>>>0;let l=(u>>>27|o<<5)>>>0,n=t>>>27,m=(-n>>>0&31)>>>0;return(l>>>n|l<<m)>>>0}integer(t){if(!t)return this._next();if(t=t>>>0,(t&t-1)===0)return this._next()&t-1;let s=0,o=(-t>>>0)%t>>>0;for(s=this._next();s<o;s=this._next());return s%t}number(){let t=(this._next()&67108863)*1,s=(this._next()&134217727)*1;return(t*P2+s)/$2}};function D2(e,t,s,o,u){let l=(s>>>16)*(u&65535)>>>0,n=(s&65535)*(u>>>16)>>>0,m=(s&65535)*(u&65535)>>>0,i=(s>>>16)*(u>>>16)+((n>>>16)+(l>>>16))>>>0;n=n<<16>>>0,m=m+n>>>0,m>>>0<n>>>0&&(i=i+1>>>0),l=l<<16>>>0,m=m+l>>>0,m>>>0<l>>>0&&(i=i+1>>>0),i=i+Math.imul(s,o)>>>0,i=i+Math.imul(t,u)>>>0,e[0]=i,e[1]=m}function id(e,t,s,o,u){let l=t+o>>>0,n=s+u>>>0;n>>>0<s>>>0&&(l=l+1|0),e[0]=l,e[1]=n}function Wm(e){return e!==void 0}var pd=ad,$e=Pe,y=dd,_l=cd,c={sym:Symbol.for("tsplus/Hash")};function ad(e){return typeof e=="object"&&e!==null&&c.sym in e}function Pe(e){return e&3221225471|e>>>1&1073741824}function dd(e){return Pe(hd(e))}function pl(e){return Pe(j2(e))}function k(e,t){return Pe(Hm(e,t))}function Es(e){return Pe(Q2(e))}function Z(e){return Pe(xd(e))}function E(e){return Pe(il(e))}function cd(){return Pe(fd())}function _d(e){return e==null||e===!1}var B2=new wo(Math.random()*4294967296>>>0),ml=new WeakMap;function fd(){return B2.integer(2147483647)}function hd(e){if(_d(e)||typeof e.valueOf=="function"&&e.valueOf!==Object.prototype.valueOf&&(e=e.valueOf(),_d(e)))return 0;switch(typeof e){case"number":return xd(e);case"string":return il(e);case"function":return K2(e);case"object":return V2(e);case"boolean":return e===!0?1:0;case"symbol":return il(String(e));case"bigint":return il(e.toString(10));case"undefined":return 0}}function j2(e){let t=6151;for(let s=0;s<e.length;s++)t=Hm(t,hd(e[s]));return t}function Hm(e,t){return e*53^t}function V2(e){let t=ml.get(e);return Wm(t)||(ad(e)?t=e[c.sym]():t=cd(),ml.set(e,t)),t}function K2(e){let t=ml.get(e);return Wm(t)||(t=fd(),ml.set(e,t)),t}function Q2(e){let t=6151,s;for(;!(s=e.next()).done;)t=Hm(t,dd(s.value));return t}function xd(e){if(e!==e||e===1/0)return 0;let t=e|0;for(t!==e&&(t^=e*4294967295);e>4294967295;)t^=e/=4294967295;return e}function il(e){let t=5381,s=e.length;for(;s;)t=t*33^e.charCodeAt(--s);return t}var h={sym:Symbol.for("tsplus/Equals")};function gd(e){return pd(e)&&h.sym in e}function yd(e,t){return e===t||e!==e&&t!==t}function N(e,t){if(e===t)return!0;if(yd(y(e),y(t))){if(gd(e))return e[h.sym](t);if(gd(t))return t[h.sym](e)}else return!1;return yd(e,t)}var X2=E("Maybe/None"),Z2=E("Maybe/Some"),Ku=class{constructor(){this._tag="None"}[h.sym](t){return t instanceof Ku}[c.sym](){return X2}},Qu=class{constructor(t){this.value=t,this._tag="Some"}[h.sym](t){return t instanceof Qu&&N(this.value,t.value)}[c.sym](){return k(Z2,y(this.value))}};var bd=new Ku,S=bd;function Sd(){return bd}function w(e){return new Qu(e)}function rt(e){return e._tag==="None"}function kt(e){return e._tag==="Some"}var al={$:{},Error:class extends Error{constructor(t,s){super(),this.exit=t,this.trace=s,this._tag="EffectError"}}},J=class{};var dl=class extends J{constructor(t,s,o){super(),this.effect=t,this.k=s,this.trace=o,this._tag="FlatMap"}apply(t){return this.k(t)}unsafeLog(){return`${this._tag} at ${this.trace}`}},cl=class extends J{constructor(t,s){super(),this.value=t,this.trace=s,this._tag="SucceedNow"}unsafeLog(){return`${this._tag} at ${this.trace}`}},fl=class extends J{constructor(t,s){super(),this.effect=t,this.trace=s,this._tag="Succeed"}unsafeLog(){return`${this._tag} at ${this.trace}`}};var hl=class extends J{constructor(t,s){super(),this.make=t,this.trace=s,this._tag="Suspend"}unsafeLog(){return`${this._tag} at ${this.trace}`}},xl=class extends J{constructor(t,s){super(),this.make=t,this.trace=s,this._tag="SuspendWith"}unsafeLog(){return`${this._tag} at ${this.trace}`}},Xu=class extends J{constructor(t,s,o){super(),this.register=t,this.blockingOn=s,this.trace=o,this._tag="Async"}unsafeLog(){return`${this._tag} at ${this.trace}`}},ko=class extends J{constructor(t,s,o,u){super(),this.effect=t,this.failure=s,this.success=o,this.trace=u,this._tag="Fold"}apply(t){return this.success(t)}unsafeLog(){return`${this._tag} at ${this.trace}`}},gl=class extends J{constructor(t,s,o){super(),this.effect=t,this.scope=s,this.trace=o,this._tag="Fork"}unsafeLog(){return`${this._tag} at ${this.trace}`}},yl=class extends J{constructor(t,s,o){super(),this.effect=t,this.flag=s,this.trace=o,this._tag="InterruptStatus"}unsafeLog(){return`${this._tag} at ${this.trace}`}},bl=class extends J{constructor(t,s){super(),this.k=t,this.trace=s,this._tag="CheckInterrupt"}unsafeLog(){return`${this._tag} at ${this.trace}`}},Eo=class extends J{constructor(t,s){super(),this.cause=t,this.trace=s,this._tag="Fail"}unsafeLog(){return`${this._tag} at ${this.trace}`}},Sl=class extends J{constructor(t,s){super(),this.f=t,this.trace=s,this._tag="Descriptor"}unsafeLog(){return`${this._tag} at ${this.trace}`}};var vl=class extends J{constructor(t,s){super(),this.f=t,this.trace=s,this._tag="FiberRefModifyAll"}unsafeLog(){return`${this._tag} at ${this.trace}`}},wl=class extends J{constructor(t,s,o){super(),this.fiberRef=t,this.f=s,this.trace=o,this._tag="FiberRefModify"}unsafeLog(){return`${this._tag} at ${this.trace}`}},kl=class extends J{constructor(t,s,o,u){super(),this.localValue=t,this.fiberRef=s,this.effect=o,this.trace=u,this._tag="FiberRefLocally"}unsafeLog(){return`${this._tag} at ${this.trace}`}};var El=class extends J{constructor(t,s,o){super(),this.fiberRef=t,this.f=s,this.trace=o,this._tag="FiberRefWith"}unsafeLog(){return`${this._tag} at ${this.trace}`}};var Ml=class extends J{constructor(t,s,o,u,l){super(),this.left=t,this.right=s,this.leftWins=o,this.rightWins=u,this.trace=l,this._tag="RaceWith"}unsafeLog(){return`${this._tag} at ${this.trace}`}};var Il=class extends J{constructor(t,s){super(),this.f=t,this.trace=s,this._tag="GetForkScope"}unsafeLog(){return`${this._tag} at ${this.trace}`}},Nl=class extends J{constructor(t,s,o){super(),this.effect=t,this.forkScope=s,this.trace=o,this._tag="OverrideForkScope"}unsafeLog(){return`${this._tag} at ${this.trace}`}},Rl=class extends J{constructor(t,s,o){super(),this.effect=t,this.finalizer=s,this.trace=o,this._tag="Ensuring"}unsafeLog(){return`${this._tag} at ${this.trace}`}};function C(e,t){return new cl(e,t)}function Nt(e){return new Array(e)}var dt=class{constructor(t){this.initial=t,this.current=t}get get(){return this.current}getAndSet(t){let s=this.current;return this.set(t),s}set(t){this.current=t}compareAndSet(t,s){return this.get===t?(this.set(s),!0):!1}};var Rt=class extends dt{constructor(t){super(t),this.incrementAndGet=this.incrementAndGet.bind(this),this.decrementAndGet=this.decrementAndGet.bind(this)}incrementAndGet(){return this.set(this.get+1),this.get}decrementAndGet(){return this.set(this.get-1),this.get}getAndIncrement(){let t=this.get;return this.set(this.get+1),t}};var Cl=class{};var Y2="IndexOutOfBounds",re=class extends Cl{constructor(t,s,o){super(),this.index=t,this.min=s,this.max=o,this._tag=Y2,this.message=`${this.index} is out of bounds (min ${this.min}, max ${this.max})`}};var tS="NoSuchElement",Mo=class{constructor(){this._tag=tS}};var vd;var wd=Id,ct=64,Um=Symbol.for("@tsplus/collections/Chunk"),Io=typeof Buffer<"u"?Buffer.alloc:e=>new Uint8Array(e);function No(e){return typeof e=="number"&&Number.isInteger(e)&&e>=0&&e<=255}var Me=class{constructor(){this[vd]=Um}_arrayLike(){if(this.arrayLikeCache)return this.arrayLikeCache;let t=this.binary?Io(this.length):Nt(this.length);return this._copyToArray(0,t),this.arrayLikeCache=t,t}_array(){if(this.arrayCache)return this.arrayCache;let t=Nt(this.length);return this._copyToArray(0,t),this.arrayCache=t,t}[(vd=Um,h.sym)](t){return Md(t)&&Id(this,t,N)}[c.sym](){return Es(this[Symbol.iterator]())}toString(){return`Chunk(${this._array().join(", ")})`}toJSON(){return this._array()}_buckets(){return{[Symbol.iterator]:()=>this._arrayLikeIterator()}}_reverseBuckets(){return{[Symbol.iterator]:()=>this._reverseArrayLikeIterator()}}_reverse(){let t=this._arrayLike();return{[Symbol.iterator]:()=>{let s=t.length-1;return{next:()=>{if(s>=0&&s<t.length){let o=t[s];return s--,{value:o,done:!1}}return{value:t.length,done:!0}}}}}}_materialize(){switch(this._typeId){case Is:return this;case Ge:return this;default:return Cs(this._arrayLike())}}_append(t){let s=this.binary&&No(t),o=this.binary&&s?Io(ct):Nt(ct);return o[0]=t,new Ns(this,o,1,new Rt(1),this.binary&&s)}_prepend(t){let s=this.binary&&No(t),o=this.binary&&s?Io(ct):Nt(ct);return o[ct-1]=t,new Rs(this,o,1,new Rt(1),this.binary&&s)}_take(t){if(t<=0)return _t;if(t>=this.length)return this;switch(this._typeId){case Is:return _t;case Ll:return t>=this.length?this:new As(this.chunk,this.offset,t);case pe:return this;default:return new As(this,0,t)}}_concat(t){if(this._typeId===Is)return t;if(t._typeId===Is)return this;if(this._typeId===kd){let o=Cs(this.buffer)._take(this.bufferUsed);return this.start._concat(o)._concat(t)}if(t._typeId===Ed){let o=Cs(t.bufferUsed===0?[]:t.buffer.slice(-t.bufferUsed));return this._concat(o)._concat(t.end)}let s=t.depth-this.depth;if(Math.abs(s)<=1)return new Dt(this,t);if(s<-1)if(this.left.depth>=this.right.depth){let o=this.right._concat(t);return new Dt(this.left,o)}else{let o=this.right.right._concat(t);if(o.depth===this.depth-3){let u=new Dt(this.right.left,o);return new Dt(this.left,u)}else{let u=new Dt(this.left,this.right.left);return new Dt(u,o)}}else if(this.right.depth>=t.left.depth){let o=this._concat(t.left);return new Dt(o,t.right)}else{let o=this._concat(t.left.left);if(o.depth===t.depth-3){let u=new Dt(o,t.left.right);return new Dt(u,t.right)}else{let u=new Dt(t.left.right,t.right);return new Dt(o,u)}}}},Is=Symbol.for("@effect-ts/core/collection/immutable/Chunk/Empty"),$m=class extends Me{constructor(){super(),this.depth=0,this._typeId=Is,this.left=this,this.right=this,this.binary=!0,this.length=0}_get(t){throw new re(t,0,this.length-1)}_materialize(){return Cs([])}_copyToArray(t,s){}[Symbol.iterator](){return{next:()=>({value:0,done:!0})}}_arrayLikeIterator(){return{next:()=>({value:0,done:!0})}}_reverseArrayLikeIterator(){return{next:()=>({value:0,done:!0})}}},_t=new $m;var kd=Symbol.for("@effect-ts/core/collection/immutable/Chunk/AppendN"),Ns=class extends Me{constructor(t,s,o,u,l){super(),this.start=t,this.buffer=s,this.bufferUsed=o,this.chain=u,this.binary=l,this._typeId=kd,this.depth=0,this.left=_t,this.right=_t,this.length=this.start.length+this.bufferUsed}_get(t){if(t<this.start.length)return this.start._get(t);let s=t-this.start.length;if(s>=this.buffer.length||s<0)throw new re(t,0,this.length-1);return this.buffer[s]}_append(t){let s=this.binary&&No(t);if(this.bufferUsed<this.buffer.length&&this.chain.compareAndSet(this.bufferUsed,this.bufferUsed+1)){if(this.binary&&!s){let o=Nt(ct);for(let u=0;u<ct;u++)o[u]=this.buffer[u];return o[this.bufferUsed]=t,new Ns(this.start,o,this.bufferUsed+1,this.chain,this.binary&&s)}return this.buffer[this.bufferUsed]=t,new Ns(this.start,this.buffer,this.bufferUsed+1,this.chain,this.binary&&s)}else{let o=this.binary&&s?Io(ct):Nt(ct);o[0]=t;let u=Cs(this.buffer)._take(this.bufferUsed);return new Ns(this.start._concat(u),o,1,new Rt(1),this.binary&&s)}}_copyToArray(t,s){this.start._copyToArray(t,s),ql(this.buffer,0,s,this.start.length+t,this.bufferUsed)}[Symbol.iterator](){return this._arrayLike()[Symbol.iterator]()}_arrayLikeIterator(){let t=this._arrayLike(),s=!1;return{next:()=>s?{value:1,done:!0}:(s=!0,{value:t,done:!1})}}_reverseArrayLikeIterator(){let t=this._arrayLike(),s=!1;return{next:()=>s?{value:1,done:!0}:(s=!0,{value:t,done:!1})}}},Ge=Symbol.for("@effect-ts/core/collection/immutable/Chunk/Arr"),Al=class extends Me{constructor(){super(...arguments),this._typeId=Ge}},Pm=class extends Al{constructor(t){super(),this.array=t,this.depth=0,this.left=_t,this.right=_t,this.length=t.length}get binary(){return typeof this.isBytes<"u"?this.isBytes:(this.isBytes=this.array.every(No),this.isBytes)}_get(t){if(t>=this.length||t<0)throw new re(t,0,this.length-1);return this.array[t]}_arrayLike(){if(!this.binary)return this.array;if(this.arrayLikeCache)return this.arrayLikeCache;let t=Io(this.length);return this._copyToArray(0,t),this.arrayLikeCache=t,t}_array(){return this.array}_materialize(){return this}_copyToArray(t,s){ql(this.array,0,s,t,this.length)}[Symbol.iterator](){return this.array[Symbol.iterator]()}_arrayLikeIterator(){let t=!1;return{next:()=>t?{value:1,done:!0}:(t=!0,{value:this.array,done:!1})}}_reverseArrayLikeIterator(){let t=!1;return{next:()=>t?{value:1,done:!0}:(t=!0,{value:this.array,done:!1})}}},Dm=class extends Al{constructor(t){super(),this.array=t,this.depth=0,this.left=_t,this.right=_t,this.binary=!0,this.length=t.length}_arrayLike(){return this.array}_get(t){if(t>=this.length||t<0)throw new re(t,0,this.length-1);return this.array[t]}_materialize(){return this}_copyToArray(t,s){ql(this.array,0,s,t,this.length)}[Symbol.iterator](){return this.array[Symbol.iterator]()}_arrayLikeIterator(){let t=!1;return{next:()=>t?{value:1,done:!0}:(t=!0,{value:this.array,done:!1})}}_reverseArrayLikeIterator(){let t=!1;return{next:()=>t?{value:1,done:!0}:(t=!0,{value:this.array,done:!1})}}},Ll=Symbol.for("@effect-ts/core/collection/immutable/Chunk/Slice"),As=class extends Me{constructor(t,s,o){super(),this.chunk=t,this.offset=s,this.length=o,this.depth=0,this.left=_t,this.right=_t,this._typeId=Ll,this.binary=this.chunk.binary}_get(t){return this.chunk._get(t+this.offset)}_copyToArray(t,s){let o=0,u=t;for(;o<this.length;)s[u]=this._get(o),o+=1,u+=1}[Symbol.iterator](){return this._arrayLike()[Symbol.iterator]()}_arrayLikeIterator(){let t=this._arrayLike(),s=!1;return{next:()=>s?{value:1,done:!0}:(s=!0,{value:t,done:!1})}}_reverseArrayLikeIterator(){let t=this._arrayLike(),s=!1;return{next:()=>s?{value:1,done:!0}:(s=!0,{value:t,done:!1})}}},pe=Symbol.for("@effect-ts/core/collection/immutable/Chunk/Singleton"),De=class extends Me{constructor(t){super(),this.a=t,this.depth=0,this.left=_t,this.right=_t,this.length=1,this._typeId=pe,this.binary=No(t)}_get(t){if(t===0)return this.a;throw new re(t,0,this.length-1)}_copyToArray(t,s){s[t]=this.a}[Symbol.iterator](){return this._arrayLike()[Symbol.iterator]()}_arrayLikeIterator(){let t=!1;return{next:()=>t?{value:1,done:!0}:(t=!0,{value:this._arrayLike(),done:!1})}}_reverseArrayLikeIterator(){let t=!1;return{next:()=>t?{value:1,done:!0}:(t=!0,{value:this._arrayLike(),done:!1})}}},Ed=Symbol.for("@effect-ts/core/collection/immutable/Chunk/PrependN"),Rs=class extends Me{constructor(t,s,o,u,l){super(),this.end=t,this.buffer=s,this.bufferUsed=o,this.chain=u,this.binary=l,this.depth=0,this.left=_t,this.right=_t,this._typeId=Ed,this.length=this.end.length+this.bufferUsed}_get(t){if(t<this.bufferUsed){let s=ct-this.bufferUsed+t;if(s>=this.buffer.length||s<0)throw new re(t,0,this.length-1);return this.buffer[s]}return this.end._get(t-this.bufferUsed)}_copyToArray(t,s){let o=Math.min(this.bufferUsed,Math.max(s.length-t,0));ql(this.buffer,ct-this.bufferUsed,s,t,o),this.end._copyToArray(t+o,s)}prepend(t){let s=this.binary&&No(t);if(this.bufferUsed<this.buffer.length&&this.chain.compareAndSet(this.bufferUsed,this.bufferUsed+1)){if(this.binary&&!s){let o=Nt(ct);for(let u=0;u<ct;u++)o[u]=this.buffer[u];return o[ct-this.bufferUsed-1]=t,new Rs(this.end,o,this.bufferUsed+1,this.chain,!1)}return this.buffer[ct-this.bufferUsed-1]=t,new Rs(this.end,this.buffer,this.bufferUsed+1,this.chain,this.binary&&s)}else{let o=s?Io(ct):Nt(ct);o[ct-1]=t;let u=Cs("subarray"in this.buffer?this.buffer.subarray(this.buffer.length-this.bufferUsed):this.buffer.slice(this.buffer.length-this.bufferUsed));return new Rs(u._concat(this.end),o,1,new Rt(1),this.binary&&s)}}[Symbol.iterator](){return this._arrayLike()[Symbol.iterator]()}_arrayLikeIterator(){let t=!1;return{next:()=>t?{value:1,done:!0}:(t=!0,{value:this._arrayLike(),done:!1})}}_reverseArrayLikeIterator(){let t=!1;return{next:()=>t?{value:1,done:!0}:(t=!0,{value:this._arrayLike(),done:!1})}}};function ql(e,t,s,o,u){for(let l=t;l<Math.min(e.length,t+u);l++)s[o+l-t]=e[l];return s}var eS=Symbol.for("@effect-ts/core/collection/immutable/Chunk/Concat"),Dt=class extends Me{constructor(t,s){super(),this.left=t,this.right=s,this._typeId=eS,this.depth=1+Math.max(this.left.depth,this.right.depth),this.length=this.left.length+this.right.length,this.binary=this.left.binary&&this.right.binary}_get(t){return t<this.left.length?this.left._get(t):this.right._get(t-this.left.length)}_copyToArray(t,s){this.left._copyToArray(t,s),this.right._copyToArray(t+this.left.length,s)}[Symbol.iterator](){return this._arrayLike()[Symbol.iterator]()}_arrayLikeIterator(){let t=this.left._arrayLikeIterator(),s=0,o=t.next(),u=0;return{next:()=>{if(u++,s===0&&o.done){t=this.right._arrayLikeIterator();let l=t.next();return l.done?{value:u,done:!0}:(s++,o=t.next(),l)}else{if(o.done)return{value:u,done:!0};let l=o;return o=t.next(),l}}}}_reverseArrayLikeIterator(){let t=this.right._arrayLikeIterator(),s=0,o=t.next(),u=0;return{next:()=>{if(u++,s===0&&o.done){t=this.left._arrayLikeIterator();let l=t.next();return l.done?{value:u,done:!0}:(s++,o=t.next(),l)}else{if(o.done)return{value:u,done:!0};let l=o;return o=t.next(),l}}}}};function Md(e){return typeof e=="object"&&e!=null&&Um in e}function Cs(e){return Md(e)?e:e instanceof Uint8Array?new Dm(e):new Pm(Array.isArray(e)?e:Array.from(e))}function Et(e){return Cs(e)}function Id(e,t,s){if(e.length!==t.length)return!1;let o=e._arrayLikeIterator(),u=t._arrayLikeIterator(),l=0,n=0,m=!0,i=!1,_=0,a=0,p,f,b,M;for(;m&&!i;)l<_&&n<a?(s(p[l],f[n])||(m=!1),l++,n++):l===_&&(b=o.next())&&!b.done?(p=b.value,_=p.length,l=0):n===a&&(M=u.next())&&!M.done?(f=M.value,a=f.length,n=0):l===_&&n===a?i=!0:m=!1;return m}function d(e,t,s){return new dl(e,t,s)}function v(e,t,s){return d(e,o=>C(t(o),s),s)}function I(e,t){return new hl(e,t)}function x(e,t){return new fl(e,t)}function j(e,t,s){return d(e,t,s)}var sS="(@effect/core) _src/io/Effect/operations/unit.ts",Nd=C(void 0,sS+":6:66"),F=Nd;function qs(e,t){return j(e,()=>Nd,t)}function Ct(e,t,s){return rt(e)?t():s(e.value)}function Rd(){return!1}function Ao(){}function st(e){return e}var Bm=Symbol.for("@effect/core/io/FiberRef");var Cd,Lo=class{constructor(t,s,o,u,l){this._initial=t,this._diff=s,this._combine=o,this._patch=u,this._fork=l,this[Cd]=Bm}};Cd=Bm;function Ad(e,t,s,o,u){return new Lo(e,t,s,o,u)}function Wt(e,t=st,s=(o,u)=>u){return Ad(e,(o,u)=>()=>u,(o,u)=>l=>u(o(l)),o=>u=>s(u,o(u)),t)}var z=class{constructor(t){this.__lazy=t}get value(){let t=this.__lazy();return Object.defineProperty(this,"value",{value:t}),t}};z.make=e=>new z(e);var jm=z.make(()=>Wt(S));var Ld;var Vm=Symbol.for("tsplus/Tuple"),Ol=class{constructor(t){this.tuple=t,this[Ld]=Vm}[(Ld=Vm,Symbol.iterator)](){return this.tuple[Symbol.iterator]()}[c.sym](){return pl(this.tuple)}[h.sym](t){return rS(t)?this.tuple.length===t.tuple.length&&this.tuple.every((s,o)=>N(s,t.tuple[o])):!1}get(t){return this.tuple[t]}};function rS(e){return typeof e=="object"&&e!=null&&Vm in e}function g(...e){return new Ol(e)}function qd(e,t,s){return new wl(e,t,s)}function Fl(e,t){return qd(e,s=>g(s,s),t)}function Fd(e,t,s){return new El(e,t,s)}function qo(e,t,s){return o=>new kl(t,e,o,s)}function Qm(e,t){return Fd(jm.value,e,t)}function zd(e,t,s){return I(()=>qo(jm.value,w(t),s)(e),s)}var zl=pS;function*_S(e,t){let s=-1;for(;;){let o=e.next();if(o.done)break;s+=1,yield t(o.value,s)}}function pS(e,t){return{[Symbol.iterator]:()=>_S(e[Symbol.iterator](),t)}}function Wl(e,t){return{*[Symbol.iterator](){let s=0;for(let o of e)s++>=t&&(yield o)}}}var f4={*[Symbol.iterator](){}};function Hl(e,t,s){let o=t,u=e[Symbol.iterator]();for(;;){let l=u.next();if(l.done)break;o=s(o,l.value)}return o}var aS,Wd,dS,Hd,Td,Ud,cS=Symbol.for("@effect/core/Cause/errors/FiberFailure");aS=cS;var fS=Symbol.for("@effect/core/Cause/errors/Runtime"),Ul=class{constructor(t){this.message=t,this[Wd]="RuntimeError"}};Wd=fS;var hS=Symbol.for("@effect/core/Cause/errors/Channel");dS=hS;var $d=Symbol.for("@effect/core/Cause/errors/Interrupted"),Fs=class extends Error{constructor(t){super(t),this[Hd]="InterruptedException",this.name=this[$d]}};Hd=$d;var Pd=Symbol.for("@effect/core/Cause/errors/IllegalState"),$l=class extends Error{constructor(t){super(t),this[Td]="IllegalStateException",this.name=this[Pd]}};Td=Pd;var Dd=Symbol.for("@effect/core/Cause/errors/IllegalArgument"),Oo=class extends Error{constructor(t){super(t),this[Ud]="IllegalArgumentException",this.name=this[Dd]}};Ud=Dd;var V=class{constructor(t,s){this.value=t,this.previous=s}};function Ht(e){let t,s,o=e;for(;o!=null;)switch(o._tag){case"FlatMap":{switch(o.value._tag){case"Succeed":{o=o.cont(o.value.a());break}default:t=new V(o.cont,t),o=o.value}break}case"Suspend":{o=o.f();break}case"Succeed":{s=o.a(),t?(o=t.value(s),t=t.previous):o=void 0;break}}return s}var Gd,Bd,jd,zo=Symbol.for("@tsplus/stdlib/io/Eval");var Fo=class{constructor(t){this.a=t,this._tag="Succeed",this[Gd]=zo}};Gd=zo;var Dl=class{constructor(t){this.f=t,this._tag="Suspend",this[Bd]=zo}};Bd=zo;var Gl=class{constructor(t,s){this.value=t,this.cont=s,this._tag="FlatMap",this[jd]=zo}};jd=zo;function K(e){return new Fo(e)}function ot(e){return new Dl(e)}function Be(e,t){return new Gl(e,t)}function jl(e,t){return Be(e,s=>K(()=>t(s)))}function je(e,t,s){return Be(e,o=>jl(t(),u=>s(o,u)))}var Zm=class{constructor(t){this.io=t}*[Symbol.iterator](){return yield this}};function xS(e){return new Zm(e)}function Kd(e,t){return e.done?K(()=>e.value):Be(e.value.io,s=>{let o=t.next(s);return Kd(o,t)})}function ce(e){return ot(()=>{let t=e(xS),s=t.next();return Kd(s,t)})}function Ve(e){return e._size}var Vl=Symbol.for("@tsplus/stdlib/collection/HashMap");function Qd(e){return typeof e=="object"&&e!=null&&Vl in e}var Ym=Math.pow(2,5),Xd=Ym-1,Zd=Ym/2,Jd=Ym/4;function bS(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Ke(e,t){return t>>>e&Xd}function Qe(e){return 1<<e}function Kl(e,t){return bS(e&t-1)}function Ws(e,t,s,o){let u=o;if(!e){let l=o.length;u=Nt(l);for(let n=0;n<l;++n)u[n]=o[n]}return u[t]=s,u}function t_(e,t,s){let o=s.length-1,u=0,l=0,n=s;if(e)u=l=t;else for(n=Nt(o);u<t;)n[l++]=s[u++];for(++u;u<=o;)n[l++]=s[u++];return e&&(n.length=o),n}function Yd(e,t,s,o){let u=o.length;if(e){let i=u;for(;i>=t;)o[i--]=o[i];return o[t]=s,o}let l=0,n=0,m=Nt(u+1);for(;l<t;)m[n++]=o[l++];for(m[t]=s;l<u;)m[++n]=o[l++];return m}var Bt=class{constructor(){this._tag="EmptyNode"}modify(t,s,o,u,l,n){let m=o(S);return rt(m)?new Bt:(++n.value,new fe(t,u,l,m))}};function Gt(e){return e instanceof Bt}function tc(e){return Gt(e)||e._tag==="LeafNode"||e._tag==="CollisionNode"}function er(e,t){return Gt(e)?!1:t===e.edit}var fe=class{constructor(t,s,o,u){this.edit=t,this.hash=s,this.key=o,this.value=u,this._tag="LeafNode"}modify(t,s,o,u,l,n){if(N(l,this.key)){let i=o(this.value);return i===this.value?this:rt(i)?(--n.value,new Bt):er(this,t)?(this.value=i,this):new fe(t,u,l,i)}let m=o(S);return rt(m)?this:(++n.value,ec(t,s,this.hash,this,u,new fe(t,u,l,m)))}},Ho=class{constructor(t,s,o){this.edit=t,this.hash=s,this.children=o,this._tag="CollisionNode"}modify(t,s,o,u,l,n){if(u===this.hash){let i=er(this,t),_=this.updateCollisionList(i,t,this.hash,this.children,o,l,n);return _===this.children?this:_.length>1?new Ho(t,this.hash,_):_[0]}let m=o(S);return rt(m)?this:(++n.value,ec(t,s,this.hash,this,u,new fe(t,u,l,m)))}updateCollisionList(t,s,o,u,l,n,m){let i=u.length;for(let a=0;a<i;++a){let p=u[a];if("key"in p&&N(n,p.key)){let f=p.value,b=l(f);return b===f?u:rt(b)?(--m.value,t_(t,a,u)):Ws(t,a,new fe(s,o,n,b),u)}}let _=l(S);return rt(_)?u:(++m.value,Ws(t,i,new fe(s,o,n,_),u))}},Xe=class{constructor(t,s,o){this.edit=t,this.mask=s,this.children=o,this._tag="IndexedNode"}modify(t,s,o,u,l,n){let m=this.mask,i=this.children,_=Ke(s,u),a=Qe(_),p=Kl(m,a),f=m&a,b=f?i[p]:new Bt,M=b.modify(t,s+5,o,u,l,n);if(b===M)return this;let T=er(this,t),X=m,at;if(f&&Gt(M)){if(X&=~a,!X)return new Bt;if(i.length<=2&&tc(i[p^1]))return i[p^1];at=t_(T,p,i)}else if(!f&&!Gt(M)){if(i.length>=Zd)return vS(t,_,M,m,i);X|=a,at=Yd(T,p,M,i)}else at=Ws(T,p,M,i);return T?(this.mask=X,this.children=at,this):new Xe(t,X,at)}},To=class{constructor(t,s,o){this.edit=t,this.size=s,this.children=o,this._tag="ArrayNode"}modify(t,s,o,u,l,n){let m=this.size,i=this.children,_=Ke(s,u),a=i[_],p=(a||new Bt).modify(t,s+5,o,u,l,n);if(a===p)return this;let f=er(this,t),b;if(Gt(a)&&!Gt(p))++m,b=Ws(f,_,p,i);else if(!Gt(a)&&Gt(p)){if(--m,m<=Jd)return SS(t,m,_,i);b=Ws(f,_,new Bt,i)}else b=Ws(f,_,p,i);return f?(this.size=m,this.children=b,this):new To(t,m,b)}};function SS(e,t,s,o){let u=Nt(t-1),l=0,n=0;for(let m=0,i=o.length;m<i;++m)if(m!==s){let _=o[m];_&&!Gt(_)&&(u[l++]=_,n|=1<<m)}return new Xe(e,n,u)}function vS(e,t,s,o,u){let l=[],n=o,m=0;for(let i=0;n;++i)n&1&&(l[i]=u[m++]),n>>>=1;return l[t]=s,new To(e,m+1,l)}function wS(e,t,s,o,u,l){if(s===u)return new Ho(e,s,[l,o]);let n=Ke(t,s),m=Ke(t,u);if(n===m)return i=>new Xe(e,Qe(n)|Qe(m),[i]);{let i=n<m?[o,l]:[l,o];return new Xe(e,Qe(n)|Qe(m),i)}}function ec(e,t,s,o,u,l){let n,m=t;for(;;){let i=wS(e,m,s,o,u,l);if(typeof i=="function")n=new V(i,n),m=m+5;else{let _=i;for(;n!=null;)_=n.value(_),n=n.previous;return _}}}var sc,Xl=e_,Ze=class{constructor(t,s,o,u){this._editable=t,this._edit=s,this._root=o,this._size=u,this[sc]=Vl}[(sc=Vl,Symbol.iterator)](){return new Hs(this,st)}[c.sym](){let t=E("HashMap");for(let s of this)t^=k(y(s.get(0)),y(s.get(1)));return $e(t)}[h.sym](t){if(Qd(t)){if(t._size!==this._size)return!1;for(let s of this){let o=e_(t,s.get(0),y(s.get(0)));if(rt(o))return!1;if(!N(s.get(1),o.value))return!1}return!0}return!1}},Hs=class{constructor(t,s){this.map=t,this.f=s,this.v=oc(this.map._root,this.f,void 0)}next(){if(rt(this.v))return{done:!0,value:void 0};let t=this.v.value;return this.v=Ql(t.cont),{done:!1,value:t.value}}[Symbol.iterator](){return new Hs(this.map,this.f)}};function Ql(e){return e?uc(e[0],e[1],e[2],e[3],e[4]):S}function oc(e,t,s=void 0){switch(e._tag){case"LeafNode":return kt(e.value)?w({value:t(g(e.key,e.value.value)),cont:s}):Ql(s);case"CollisionNode":case"ArrayNode":case"IndexedNode":{let o=e.children;return uc(o.length,o,0,t,s)}default:return Ql(s)}}function uc(e,t,s,o,u){for(;s<e;){let l=t[s++];if(l&&!Gt(l))return oc(l,o,[e,t,s,o,u])}return Ql(u)}function e_(e,t,s){let o=e._root,u=0;for(;;)switch(o._tag){case"LeafNode":return N(t,o.key)?o.value:S;case"CollisionNode":{if(s===o.hash){let l=o.children;for(let n=0,m=l.length;n<m;++n){let i=l[n];if("key"in i&&N(t,i.key))return i.value}}return S}case"IndexedNode":{let l=Ke(u,s),n=Qe(l);if(o.mask&n){o=o.children[Kl(o.mask,n)],u+=5;break}return S}case"ArrayNode":{if(o=o.children[Ke(u,s)],o){u+=5;break}return S}default:return S}}function Uo(e,t){return kt(e_(e,t,y(t)))}function Zl(e,t){return N(e,t)}function Jl(e,t){if(e===t)return!0;if(Ve(e._keyMap)!==Ve(t._keyMap))return!1;let s=!0;for(let o of e)if(!Uo(t._keyMap,o)){s=!1;break}return s}var lc,nc,ic;var Us=Symbol.for("@effect/core/io/FiberId");var Yl=class{constructor(){this._tag="None",this[lc]=Us}[(lc=Us,c.sym)](){return E(this._tag)}[h.sym](t){return s_(t)?t._tag==="None":!1}},tn=class{constructor(t,s,o){this.id=t,this.startTimeSeconds=s,this.location=o,this._tag="Runtime",this[nc]=Us}[(nc=Us,c.sym)](){return k(E(this._tag),k(Z(this.id),k(Z(this.startTimeSeconds),y(this.location))))}[h.sym](t){return s_(t)&&this[c.sym]()===t[c.sym]()}},$s=class{constructor(t){this.fiberIds=t,this._tag="Composite",this[ic]=Us}[(ic=Us,c.sym)](){return k(E(this._tag),y(this.fiberIds))}[h.sym](t){return s_(t)?t._tag==="Composite"&&Jl(this.fiberIds,t.fiberIds):!1}};function s_(e){return typeof e=="object"&&e!=null&&Us in e}var Tt=new Yl;function O(){return _t}var sr=class{constructor(t,s){this.fiberId=t,this.stackTrace=s}};function en(e,t){return new sr(e,t)}var Ut=en(Tt,O());var mc,_c,W=pc,Ie=u_;var sn=Symbol.for("@tsplus/collections/List"),ur=class{constructor(t,s){this.head=t,this.tail=s,this._tag="Cons",this[mc]=sn}[(mc=sn,Symbol.iterator)](){let t=!1,s=this;return{next(){if(t)return this.return();if(s._tag==="Nil")return t=!0,this.return();let o=s.head;return s=s.tail,{done:t,value:o}},return(o){return t||(t=!0),{done:!0,value:o}}}}[c.sym](){return Es(this[Symbol.iterator]())}[h.sym](t){return t instanceof ur&&ES(this,t,N)}},rr=class{constructor(){this._tag="Nil",this[_c]=sn}[(_c=sn,Symbol.iterator)](){return{next(){return{done:!0,value:void 0}}}}[c.sym](){return Es(this[Symbol.iterator]())}[h.sym](t){return t instanceof rr}},kS=new rr;function lt(){return kS}function Y(e,t){return new ur(e,t)}function pc(e){return e._tag==="Nil"}function u_(e){let t=e,s=0;for(;!pc(t);)s+=1,t=t.tail;return s}function ES(e,t,s){if(e===t)return!0;if(u_(e)!==u_(t))return!1;{let o=e[Symbol.iterator](),u=t[Symbol.iterator](),l,n;for(;!(l=o.next()).done&&!(n=u.next()).done;)if(!s(l.value,n.value))return!1;return!0}}function he(e){if(!W(e))return e.head}function lr(e){if(!W(e))return e.tail}function it(e,t){return Y(t,e)}function cc(e,t,s){return e._editable?(e._root=t,e._size=s,e):t===e._root?e:new Ze(e._editable,e._edit,t,s)}function fc(e,t,s,o){let u={value:e._size},l=e._root.modify(e._editable?e._edit:NaN,0,o,s,t,u);return cc(e,l,u.value)}function hc(e,t,s){return fc(e,t,y(t),s)}function Ne(e,t,s){return hc(e,t,()=>w(s))}function xc(e){return new Hs(e,({tuple:[t]})=>t)}var un=Symbol.for("@tsplus/stdlib/collections/HashSet");function gc(e){return typeof e=="object"&&e!=null&&un in e}var yc,Je=class{constructor(t){this._keyMap=t,this[yc]=un}[(yc=un,Symbol.iterator)](){return xc(this._keyMap)}[c.sym](){return k(E("HashSet"),y(this._keyMap))}[h.sym](t){return gc(t)?Ve(this._keyMap)===Ve(t._keyMap)&&Zl(this._keyMap,t._keyMap):!1}};function tt(e,t){return e._keyMap._editable?(Ne(e._keyMap,t,!0),e):new Je(Ne(e._keyMap,t,!0))}function xt(){return lt()}function Ye(){return new Ze(!1,0,new Bt,0)}function H(){return new Je(Ye())}function ln(e){return new Ze(!0,e._edit+1,e._root,e._size)}function $o(e){return new Je(ln(e._keyMap))}function Po(e){return e._keyMap._editable=!1,e}function Do(...e){let t=$o(H());for(let s of e)tt(t,s);return Po(t)}var Sc=Gt;function nn(e,t,s){let o=e._root;if(o._tag==="LeafNode")return kt(o.value)?s(t,o.key,o.value.value):t;if(o._tag==="EmptyNode")return t;let u=[o.children],l;for(;l=u.pop();)for(let n=0,m=l.length;n<m;){let i=l[n++];i&&!Sc(i)&&(i._tag==="LeafNode"?kt(i.value)&&(t=s(t,i.key,i.value.value)):u.push(i.children))}return t}function wc(e,t){nn(e,void 0,(s,o,u)=>t(o,u))}function Re(e,t){wc(e._keyMap,s=>{t(s)})}function Go(e,t){let s=$o(e);return t(s),Po(s)}function ts(e,t){let s=H();return Go(s,o=>{Re(e,u=>{tt(o,u)});for(let u of t)tt(o,u)})}function pn(e,t){if(W(e))return t;if(W(t))return e;{let s=Y(t.head,e),o=s,u=t.tail;for(;!W(u);){let l=Y(u.head,e);o.tail=l,o=l,u=u.tail}return s}}function Ec(e,t){return pn(t,e)}function nr(e,t,s){let o=t,u=e;for(;!W(u);)o=s(o,u.head),u=u.tail;return o}function Bs(e){return Ve(e._keyMap)}function ge(e){let t=xt(),s=e;for(;!W(s);)t=it(t,s.head),s=s.tail;return t}var Ic=Nc;function Nc(e){let t=e[Symbol.iterator](),s;if((s=t.next()).done)return lt();{let o=Y(s.value,lt()),u=o;for(;!(s=t.next()).done;){let l=Y(s.value,lt());u.tail=l,u=l}return o}}function Ce(...e){return Nc(e)}function cn(e){return new Fo(()=>e)}var Cc,Ac,Lc,qc,Oc,Fc,zc;var Wc=mr,Lt=Symbol.for("@effect/core/io/Cause");function Bo(e){return e._tag==="Empty"}function fn(e){return e._tag==="Die"}function hn(e){return e._tag==="Fail"}function jo(e){return e._tag==="Interrupt"}function OS(e){return e._tag==="Stackless"}function gt(e){return e._tag==="Then"}function At(e){return e._tag==="Both"}var __=class{constructor(){this._tag="Empty",this[Cc]=Lt}[(Cc=Lt,c.sym)](){return Tc}[h.sym](t){return Xs(t)&&Ht(this.__equalsSafe(t))}__equalsSafe(t){switch(t._tag){case"Empty":return K(()=>!0);case"Both":case"Then":return je(ot(()=>this.__equalsSafe(t.left)),()=>ot(()=>this.__equalsSafe(t.right)),(s,o)=>s&&o);case"Stackless":return ot(()=>this.__equalsSafe(t.cause));default:return K(()=>!1)}}},ir=class{constructor(t,s){this.value=t,this.trace=s,this._tag="Fail",this[Ac]=Lt}[(Ac=Lt,c.sym)](){return k(E(this._tag),y(this.value))}[h.sym](t){return Xs(t)&&Ht(this.__equalsSafe(t))}__equalsSafe(t){switch(t._tag){case"Fail":return K(()=>N(this.value,t.value));case"Both":case"Then":return ot(()=>Ae(_r)(this,t));case"Stackless":return ot(()=>this.__equalsSafe(t.cause));default:return K(()=>!1)}}},js=class{constructor(t,s){this.value=t,this.trace=s,this._tag="Die",this[Lc]=Lt}[(Lc=Lt,c.sym)](){return k(E(this._tag),y(this.value))}[h.sym](t){return Xs(t)&&Ht(this.__equalsSafe(t))}__equalsSafe(t){switch(t._tag){case"Die":return K(()=>N(this.value,t.value));case"Both":case"Then":return ot(()=>Ae(_r)(this,t));case"Stackless":return ot(()=>this.__equalsSafe(t.cause));default:return K(()=>!1)}}},Vs=class{constructor(t,s){this.fiberId=t,this.trace=s,this._tag="Interrupt",this[qc]=Lt}[(qc=Lt,c.sym)](){return k(E(this._tag),y(this.fiberId))}[h.sym](t){return Xs(t)&&Ht(this.__equalsSafe(t))}__equalsSafe(t){switch(t._tag){case"Interrupt":return K(()=>N(this.fiberId,t.fiberId));case"Both":case"Then":return ot(()=>Ae(_r)(this,t));case"Stackless":return ot(()=>this.__equalsSafe(t.cause));default:return K(()=>!1)}}},Ks=class{constructor(t,s){this.cause=t,this.stackless=s,this._tag="Stackless",this[Oc]=Lt}[(Oc=Lt,c.sym)](){return this.cause[c.sym]()}[h.sym](t){return Xs(t)&&Ht(this.__equalsSafe(t))}__equalsSafe(t){return t._tag==="Stackless"?this.cause.__equalsSafe(t.cause):this.cause.__equalsSafe(t)}},Kt=class{constructor(t,s){this.left=t,this.right=s,this._tag="Then",this[Fc]=Lt}[(Fc=Lt,c.sym)](){return Uc(this)}[h.sym](t){return Xs(t)&&Ht(this.__equalsSafe(t))}__equalsSafe(t){let s=this;return ce(function*(o){return t._tag==="Stackless"?yield*o(s.__equalsSafe(t.cause)):(yield*o(s.eq(t)))||(yield*o(Ae(TS)(s,t)))||(yield*o(Ae(US)(s,t)))||(yield*o(Ae(_r)(s,t)))})}eq(t){let s=this;return t._tag==="Then"?ce(function*(o){return(yield*o(s.left.__equalsSafe(t.left)))&&(yield*o(s.right.__equalsSafe(t.right)))}):K(()=>!1)}},es=class{constructor(t,s){this.left=t,this.right=s,this._tag="Both",this[zc]=Lt}[(zc=Lt,c.sym)](){return Uc(this)}[h.sym](t){return Xs(t)&&Ht(this.__equalsSafe(t))}__equalsSafe(t){let s=this;return ce(function*(o){return t._tag==="Stackless"?yield*o(s.__equalsSafe(t.cause)):(yield*o(s.eq(t)))||(yield*o(Ae($S)(s,t)))||(yield*o(Ae(PS)(s,t)))||(yield*o(DS(s,t)))||(yield*o(Ae(_r)(s,t)))})}eq(t){let s=this;return t._tag==="Both"?ce(function*(o){return(yield*o(s.left.__equalsSafe(t.left)))&&(yield*o(s.right.__equalsSafe(t.right)))}):K(()=>!1)}},qt=new __;function ss(e,t=Ut){return new js(e,t)}function xn(e,t=Ut){return new ir(e,t)}function os(e,t=Ut){return new Vs(e,t)}function Hc(e){return new Ks(e,!0)}function Qt(e,t){return mr(e)?t:mr(t)?e:new Kt(e,t)}function Qs(e,t){return mr(e)?t:mr(t)?e:new es(e,t)}function Xs(e){return typeof e=="object"&&e!=null&&Lt in e}function mr(e){if(Bo(e)||OS(e)&&Bo(e.cause))return!0;let t,s=e;for(;s;){switch(s._tag){case"Die":return!1;case"Fail":return!1;case"Interrupt":return!1;case"Then":{t=new V(s.right,t),s=s.left;break}case"Both":{t=new V(s.right,t),s=s.left;break}case"Stackless":{s=s.cause;break}default:s=void 0}!s&&t&&(s=t.value,t=t.previous)}return!0}var Tc=$e(_l());function FS(e,t,s,o){for(;;)switch(e._tag){case"Empty":{if(Ie(t)===0)return g(s,o);{e=he(t);let u=lr(t);t=u??lt()}break}case"Then":{let u=e.left,l=e.right;switch(u._tag){case"Empty":{e=e.right;break}case"Then":{e=new Kt(u.left,new Kt(u.right,l));break}case"Both":{e=new es(new Kt(u.left,l),new Kt(u.right,l));break}case"Stackless":{e=new Kt(u.cause,l);break}default:e=u,o=it(o,l)}break}case"Both":{t=it(t,e.right),e=e.left;break}case"Stackless":{e=e.cause;break}default:{if(Ie(t)===0)return g(tt(s,e),o);{s=tt(s,e),e=he(t);let u=lr(t);t=u??lt();break}}}throw new Error("Bug")}function zS(e){return FS(e,xt(),Do(),xt())}function WS(e,t){for(;;){let{tuple:[s,o]}=nr(e,g(H(),xt()),({tuple:[l,n]},m)=>{let{tuple:[i,_]}=zS(m);return g(ts(l,i),Ec(n,_))}),u=Bs(s)>0?it(t,s):t;if(Ie(o)===0)return ge(u);e=o,t=u}throw new Error("Bug")}function HS(e){return WS(Ce(e),xt())}function Uc(e){let t=HS(e),s=Ie(t),o;return s===0?Tc:s===1&&(o=he(t))&&Bs(o)===1?he(Ic(o))[c.sym]():t[c.sym]()}function Ae(e){return(t,s)=>je(e(t,s),()=>e(s,t),(o,u)=>o||u)}function _r(e,t){return gt(e)&&Bo(e.right)?e.left.__equalsSafe(t):gt(e)&&Bo(e.left)?e.right.__equalsSafe(t):At(e)&&Bo(e.right)?e.left.__equalsSafe(t):At(e)&&Bo(e.left)?e.right.__equalsSafe(t):cn(!1)}function TS(e,t){return ce(function*(s){if(gt(e)&&gt(e.left)&&gt(t)&&gt(t.right)){let o=e.left.left,u=e.left.right,l=e.right,n=t.left,m=t.right.left,i=t.right.right;return(yield*s(o.__equalsSafe(n)))&&(yield*s(u.__equalsSafe(m)))&&(yield*s(l.__equalsSafe(i)))}return!1})}function US(e,t){return ce(function*(s){if(gt(e)&&At(e.right)&&At(t)&&gt(t.left)&&gt(t.right)){let o=e.left,u=e.right.left,l=e.right.right,n=t.left.left,m=t.left.right,i=t.right.left,_=t.right.right;if((yield*s(n.__equalsSafe(i)))&&(yield*s(o.__equalsSafe(n)))&&(yield*s(u.__equalsSafe(m)))&&(yield*s(l.__equalsSafe(_))))return!0}if(gt(e)&&At(e.left)&&At(t)&&gt(t.left)&&gt(t.right)){let o=e.left.left,u=e.left.right,l=e.right,n=t.left.left,m=t.left.right,i=t.right.left,_=t.right.right;if((yield*s(m.__equalsSafe(_)))&&(yield*s(o.__equalsSafe(n)))&&(yield*s(u.__equalsSafe(i)))&&(yield*s(l.__equalsSafe(m))))return!0}return!1})}function $S(e,t){return ce(function*(s){if(At(e)&&At(e.left)&&At(t)&&At(t.right)){let o=e.left.left,u=e.left.right,l=e.right,n=t.left,m=t.right.left,i=t.right.right;return(yield*s(o.__equalsSafe(n)))&&(yield*s(u.__equalsSafe(m)))&&(yield*s(l.__equalsSafe(i)))}return!1})}function PS(e,t){return ce(function*(s){if(At(e)&&gt(e.left)&&gt(e.right)&&gt(t)&&At(t.right)){let o=e.left.left,u=e.left.right,l=e.right.left,n=e.right.right,m=t.left,i=t.right.left,_=t.right.right;if((yield*s(o.__equalsSafe(l)))&&(yield*s(o.__equalsSafe(m)))&&(yield*s(u.__equalsSafe(i)))&&(yield*s(n.__equalsSafe(_))))return!0}if(At(e)&&gt(e.left)&&gt(e.right)&&gt(t)&&At(t.left)){let o=e.left.left,u=e.left.right,l=e.right.left,n=e.right.right,m=t.left.left,i=t.left.right,_=t.right;if((yield*s(u.__equalsSafe(n)))&&(yield*s(o.__equalsSafe(m)))&&(yield*s(l.__equalsSafe(i)))&&(yield*s(u.__equalsSafe(_))))return!0}return!1})}function DS(e,t){return ce(function*(s){return At(t)?(yield*s(e.left.__equalsSafe(t.right)))&&(yield*s(e.right.__equalsSafe(t.left))):!1})}function U(e,t){return new Eo(e,t)}function $c(e,t){return U(()=>Hc(ss(new Ul(e()))),t)}function us(e){return e.length}function rs(e,t,s){return d(e,o=>v(t(o),()=>o,s),s)}function Pc(e,t){return!Number.isInteger(t)||t<0||t>=e.length?S:w(e._get(t))}function Le(e){return Pc(e,0)}function Q(e,t){return e._append(t)}function yn(e,t){let s=O();for(let o=e;o<=t;o++)s=Q(s,o);return s}function ls(e,t){if(e._typeId===pe)return new De(t(e.a));let s=O();for(let o of e)s=Q(s,t(o));return s}function VS(e,t){return ls(yn(0,e-1),t)}function a_(e,t){return VS(t,()=>e)}function Gc(e,t){let s=e._arrayLikeIterator(),o,u=t,l=O();for(;(o=s.next())&&!o.done;){let n=o.value,m=n.length,i=0;for(;i<m;){let _=n[i];l=Q(l,g(_,u)),i++,u++}}return l}function Bc(e){return Gc(e,0)}var d_=class{constructor(t){this.joiners=t,this._tag="Pending"}},c_=class{constructor(t){this.value=t,this._tag="Done"}};function pr(e){return new d_(e)}function f_(e){return new c_(e)}var ZS=E("Either/Left"),JS=E("Either/Right");var ar=class{constructor(t){this.left=t,this._tag="Left"}[h.sym](t){return t instanceof ar&&N(this.left,t.left)}[c.sym](){return k(ZS,y(this.left))}},dr=class{constructor(t){this.right=t,this._tag="Right"}[h.sym](t){return t instanceof dr&&N(this.right,t.right)}[c.sym](){return k(JS,y(this.right))}};function Vc(e){return e._tag==="Left"}function ye(e){return new dr(e)}function Jt(e){return new ar(e)}function Kc(e,t){return I(()=>new Xu(e,()=>Tt,t),t)}function Vo(e,t,s){return I(()=>new Xu(e,t,s),s)}var Ko=class{constructor(t){this.value=t,this._tag="Success"}[c.sym](){return y(this.value)}[h.sym](t){return t instanceof Ko&&N(this.value,t.value)}},ns=class{constructor(t){this.cause=t,this._tag="Failure"}[c.sym](){return y(this.cause)}[h.sym](t){return t instanceof ns&&N(this.cause,t.cause)}};function Yt(e){return new ns(e)}function wt(e){return new Ko(e)}function be(e,t){return new ko(e,s=>C(Yt(s),t),s=>C(wt(s),t),t)}function wn(e,t){return new Sl(e,t)}var YS="(@effect/core) _src/io/Effect/operations/descriptor.ts",Xc=wn(C,YS+":6:88");var ev="(@effect/core) _src/io/Effect/operations/fiberId.ts",ne=v(Xc,e=>e.id,ev+":7:76");var Xo=class{constructor(t){this.isInterruptible=t}get isUninterruptible(){return!this.isInterruptible}get toBoolean(){return this.isInterruptible}[c.sym](){return y(this.isInterruptible)}[h.sym](t){return t instanceof Xo&&this.isInterruptible===t.isInterruptible}},Zc=new Xo(!0),kn=Zc,Jc=new Xo(!1),Yc=Jc;function h_(e){return e?Zc:Jc}function fr(e){return Yt(os(e))}var sv,En=Symbol.for("@effect/core/io/Fiber");sv=En;function Zo(e,t,s){return e._interruptAs(t)}var ef,sf,of,uf,rf;var ie=Symbol.for("@effect/core/io/RuntimeConfig/Flag");var y_=class{constructor(){this._tag="EnableCurrentFiber",this[ef]=ie}[(ef=ie,c.sym)](){return E(this._tag)}[h.sym](t){return hr(t)&&this._tag===t._tag}},b_=class{constructor(){this._tag="LogRuntime",this[sf]=ie}[(sf=ie,c.sym)](){return E(this._tag)}[h.sym](t){return hr(t)&&this._tag===t._tag}},S_=class{constructor(){this._tag="SuperviseOperations",this[of]=ie}[(of=ie,c.sym)](){return E(this._tag)}[h.sym](t){return hr(t)&&this._tag===t._tag}},v_=class{constructor(){this._tag="TrackRuntimeMetrics",this[uf]=ie}[(uf=ie,c.sym)](){return E(this._tag)}[h.sym](t){return hr(t)&&this._tag===t._tag}},w_=class{constructor(){this._tag="EnableFiberRoots",this[rf]=ie}[(rf=ie,c.sym)](){return E(this._tag)}[h.sym](t){return hr(t)&&this._tag===t._tag}},k_=new y_,lf=new b_,nf=new S_,mf=new v_,Mn=new w_;function hr(e){return typeof e=="object"&&e!=null&&ie in e}function Jo(e,t){return Uo(e._keyMap,t)}function is(e,t){return Jo(e.flags,t)}var I_=class{constructor(){this.fiberId=Tt}unsafeAdd(t,s,o){return is(t.value.flags,Mn)&&(pf.value.add(s),s.unsafeOnDone(()=>{pf.value.delete(s)})),!0}},N_=class{constructor(t,s){this.fiberId=t,this.parent=s}unsafeAdd(t,s,o){let u=this.parent;return u!=null&&u.unsafeAddChild(s)}},In=z.make(()=>new I_);function af(e){return new N_(e.fiberId,e)}var pf=z.make(()=>new Set);function xr(e,t){return I(()=>new gl(e,()=>w(In.value),t),t)}function te(e,t){return new Eo(()=>e,t)}function yt(e,t){return I(()=>{let s=e();return s._tag==="Success"?C(s.value,t):te(s.cause,t)},t)}var yr=ov;function ov(e,t){return e._await}function to(e,t){return e._inheritRefs}function Yo(e,t,s){return v(e,t,s)}function ff(e,t,s){return d(e,o=>Yo(t(),()=>o,s),s)}function hf(e,t){return ff(d(yr(e,t),s=>yt(()=>s,t),t),()=>to(e,t),t)}function tu(e,t){return Ht(Nn(e,t))}function Nn(e,t){let s=t(e);if(s._tag==="Some")return K(()=>s);switch(e._tag){case"Both":case"Then":return Be(ot(()=>Nn(e.left,t)),o=>o._tag==="Some"?cn(o):Nn(e.right,t));case"Stackless":return ot(()=>Nn(e.cause,t));default:return K(()=>s)}}function Rn(e){return kt(tu(e,t=>jo(t)?w(void 0):S))}function eu(e,t,s){let o=t,u=e,l;for(;u;){let n=s(o,u);switch(o=n._tag==="Some"?n.value:o,u._tag){case"Then":{l=new V(u.right,l),u=u.left;break}case"Both":{l=new V(u.right,l),u=u.left;break}case"Stackless":{u=u.cause;break}default:{u=void 0;break}}!u&&l&&(u=l.value,l=l.previous)}return o}function Cn(e){return eu(e,H(),(t,s)=>jo(s)?w(tt(t,s.fiberId)):w(t))}function Ot(e,t,s,o){return new ko(e,t,s,o)}var qe="(@effect/core) _src/io/Effect/operations/interruption.ts";var Ln=z_;var ee=W_;var F_=yf,su=bf,O_=class{constructor(t){this.flag=t,this.restore=(s,o)=>I(()=>An(s(),()=>this.flag,qe+":34:58"),qe+":34:33"),this.force=(s,o)=>I(()=>this.flag.isUninterruptible?lv(iv(z_(s(),qe+":43:35"),qe+":43:48"),qe+":43:64"):An(s(),()=>this.flag,qe+":44:35"),qe+":41:33")}},Oe=d(ne,e=>bf(()=>e,qe+":58:80"),qe+":58:48");function An(e,t,s){return new yl(e,t,s)}function lv(e,t){return An(e,()=>kn,t)}function z_(e,t){return An(e,()=>Yc,t)}function nv(e,t){return new bl(e,t)}function W_(e,t){return nv(s=>z_(e(new O_(s)),t),t)}function iv(e,t){return W_(({restore:s})=>d(ne,o=>d(xr(s(()=>e,t),t),u=>yf(s(()=>hf(u,t),t),()=>xr(Zo(u,o,t),t),t),t),t),t)}function yf(e,t,s){return W_(({restore:o})=>Ot(o(()=>e,s),u=>Rn(u)?j(t(Cn(u)),()=>te(u,s),s):te(u,s),C,s),s)}function bf(e,t){return U(()=>os(e()),t)}function br(e,t,s){return ee(({restore:o})=>d(be(o(()=>e,s),s),u=>t().done(()=>u,s),s),s)}function qn(e,t){return U(()=>ss(e(),Ut),t)}function wf(e,t){return U(()=>xn(e(),Ut),t)}var kf,pt="(@effect/core) _src/io/Deferred/definition.ts",Ef=Symbol.for("@effect/core/io/Deferred");function _v(e,t,s){return x(()=>{let o=e.state.get;o._tag==="Pending"&&e.state.set(pr(o.joiners.filter(u=>u!==t)))},s)}var On=class{constructor(t,s){this.state=t,this.blockingOn=s,this[kf]=Ef}await(t){return Vo(s=>{let o=this.state.get;switch(o._tag){case"Done":return ye(o.value);case"Pending":return this.state.set(pr([s,...o.joiners])),Jt(_v(this,s,pt+":78:45"))}},()=>this.blockingOn,pt+":69:43")}complete(t,s){return br(t,()=>this,pt+":96:31")}completeWith(t,s){return x(()=>{let o=this.state.get;switch(o._tag){case"Done":return!1;case"Pending":return this.state.set(f_(t)),o.joiners.forEach(u=>{u(t)}),!0}},pt+":111:26")}die(t,s){return this.completeWith(qn(t,pt+":137:40"),pt+":137:29")}done(t,s){return this.completeWith(yt(t,pt+":149:41"),pt+":149:29")}fail(t,s){return this.completeWith(wf(t,pt+":157:41"),s)}failCause(t,s){return this.completeWith(U(t,pt+":169:46"),pt+":169:29")}interrupt(t){return d(ne,s=>this.completeWith(su(()=>s,pt+":177:79"),pt+":177:60"),pt+":177:34")}interruptAs(t,s){return this.completeWith(su(t,pt+":189:48"),pt+":189:29")}isDone(t){return x(()=>this.state.get._tag==="Done",pt+":197:26")}poll(t){return x(()=>{let s=this.state.get;switch(s._tag){case"Pending":return S;case"Done":return w(s.value)}},pt+":208:26")}succeed(t,s){return this.completeWith(x(t,pt+":229:44"),pt+":229:29")}unsafeDone(t){let s=this.state.get;s._tag==="Pending"&&(this.state.set(f_(t)),Array.from(s.joiners).reverse().forEach(o=>{o(t)}))}};kf=Ef;function ou(e){return new On(new dt(pr([])),e)}function Sr(e,t){switch(e._tag){case"Failure":return e;case"Success":return wt(t(e.value))}}function Fn(e,t,s,o){switch(e._tag){case"Failure":switch(t._tag){case"Success":return e;case"Failure":return Yt(o(e.cause,t.cause))}case"Success":switch(t._tag){case"Success":return wt(s(e.value,t.value));case"Failure":return t}}}function zn(e){let t=e[Symbol.iterator]().next();return!t.done&&t.value?w(Hl(Wl(e,1),Sr(t.value,s=>Ce(s)),(s,o)=>Fn(s,o,(u,l)=>it(u,l),Qs))):S}function ru(e,t,s,o,u,l,n,m){return Ht(uu(e,t,s,o,u,l,n,m))}function uu(e,t,s,o,u,l,n,m){switch(e._tag){case"Empty":return K(t);case"Fail":return K(()=>s(e.value,e.trace));case"Die":return K(()=>o(e.value,e.trace));case"Interrupt":return K(()=>u(e.fiberId,e.trace));case"Both":return je(ot(()=>uu(e.left,t,s,o,u,l,n,m)),()=>ot(()=>uu(e.right,t,s,o,u,l,n,m)),(i,_)=>n(i,_));case"Then":return je(ot(()=>uu(e.left,t,s,o,u,l,n,m)),()=>ot(()=>uu(e.right,t,s,o,u,l,n,m)),(i,_)=>l(i,_));case"Stackless":return jl(ot(()=>uu(e.cause,t,s,o,u,l,n,m)),i=>m(i,e.stackless))}}function vr(e){return ru(e,()=>qt,()=>qt,(t,s)=>new js(t,s),(t,s)=>new Vs(t,s),(t,s)=>new Kt(t,s),(t,s)=>new es(t,s),(t,s)=>new Ks(t,s))}function Cf(e,t){return d(ne,s=>Zo(e,s,t),t)}function Wn(e,t){return I(()=>new Il(s=>e((o,u)=>I(()=>new Nl(o(),w(s),u),u))),t)}var Hn=wt(void 0);function Lf(e){let t=e[Symbol.iterator]().next();return!t.done&&t.value?w(Sr(Hl(Wl(e,1),Sr(t.value,s=>Ce(s)),(s,o)=>Fn(s,o,(u,l)=>it(u,l),(u,l)=>Qt(u,l))),s=>ge(s))):S}function B(e,t){return rt(e)?t():e.value}function _s(e,t){return d(e,st,t)}var T_=class{constructor(t){this.value=t,this.removed=!1,this.right=void 0,this.left=void 0}},ze=class{constructor(){this.length=0,this.headN=void 0,this.tailN=void 0}get head(){return this.headN===void 0?void 0:this.headN.value}get isEmpty(){return this.length===0}get tail(){return this.tailN===void 0?void 0:this.tailN.value}forEach(t){let s=this.headN;for(;s!==void 0;)t(s.value),s=s.right}add(t){let s=new T_(t);return this.length===0&&(this.headN=s),this.tailN===void 0?this.tailN=s:(this.tailN.right=s,s.left=this.tailN,this.tailN=s),this.length+=1,s}empty(){this.length=0,this.headN=this.tailN=void 0}pop(){let t=this.tailN;if(t!==void 0)return this.remove(t),t.value}remove(t){t.removed||(t.removed=!0,t.left!==void 0&&t.right!==void 0?(t.left.right=t.right,t.right.left=t.left):t.left!==void 0?(this.tailN=t.left,t.left.right=void 0):t.right!==void 0?(this.headN=t.right,t.right.left=void 0):(this.tailN=void 0,this.headN=void 0),this.length>0&&(this.length-=1))}shift(){let t=this.headN;if(t!==void 0)return this.remove(t),t.value}[Symbol.iterator](){let t=!1,s=this.headN;return{next(){if(t)return this.return();if(s==null)return t=!0,this.return();let o=s.value;return s=s.right,{done:t,value:o}},return(o){return t||(t=!0),{done:!0,value:o}}}}};var lu=Symbol.for("@tsplus/stdlib/collections/mutable/MutableQueue"),bt=Symbol.for("@tsplus/stdlib/collections/mutable/MutableQueue/Empty");var qf,Un=class{constructor(t){this[qf]=lu,this.queue=new ze,this.max=t}get size(){return this.queue.length}get isEmpty(){return this.size===0}get isFull(){return this.size===this.capacity}get capacity(){return this.max}offer(t){return this.isFull?!1:(this.queue.add(t),!0)}offerAll(t){let s=t[Symbol.iterator](),o,u=O(),l=!0;for(;l&&(o=s.next())&&!o.done;)l=this.offer(o.value);for(;o&&!o.done;)u=Q(u,o.value),o=s.next();return u}poll(t){return this.isEmpty?t:this.queue.shift()}pollUpTo(t){let s=O(),o=0;for(;o<t;){let u=this.poll(bt);if(u===bt)break;s=Q(s,u),o+=1}return s}[(qf=lu,Symbol.iterator)](){return this.queue[Symbol.iterator]()}};function Of(e){return new Un(e)}var Ff,$n=class{constructor(){this[Ff]=lu,this.queue=new ze}get size(){return this.queue.length}get isEmpty(){return this.size===0}get isFull(){return!1}get capacity(){return Number.MAX_SAFE_INTEGER}offer(t){return this.queue.add(t),!0}offerAll(t){for(let s of t)this.offer(s);return O()}poll(t){return this.isEmpty?t:this.queue.shift()}pollUpTo(t){let s=O(),o=0;for(;o<t;){let u=this.poll(bt);if(u===bt)break;s=Q(s,u),o+=1}return s}[(Ff=lu,Symbol.iterator)](){return this.queue[Symbol.iterator]()}};function $_(){return new $n}var so=class extends dt{constructor(t){super(t)}};function Wf(e,t){return x(()=>ou(e()),t)}function nu(e){return d(ne,t=>Wf(()=>t,e),e)}function Hf(e,t){return v(e,w,t)}var yv="(@effect/core) _src/io/Effect/operations/succeedNone.ts",Tf=x(()=>S,yv+":6:78");function Pn(e,t,s){return d(I(e,s),o=>o?Hf(t(),s):Tf,s)}function iu(e,t){return new xl(e,t)}function mu(e){return new De(e)}function Pf(e,t){return e._take(t)}function _u(e,t){if(t<=0)return e;if(t>=e.length)return _t;{let s=e.length;switch(e._typeId){case Is:return _t;case Ll:return new As(e.chunk,e.offset+t,e.length-t);case pe:return t>0?_t:e;default:return new As(e,t,s-t)}}}function Dn(e,t){return g(Pf(e,t),_u(e,t))}function Gf(e,t,s){let o=Math.min(e.length,t.length);if(o===0)return O();let u=e._arrayLikeIterator(),l=t._arrayLikeIterator(),n=0,m=0,i=0,_=0,a=0,p,f,b,M,T=O();for(;n<o;)m<_&&i<a?(T=Q(T,s(p[m],f[i])),n++,m++,i++):m===_&&(b=u.next())&&!b.done?(p=b.value,_=p.length,m=0):i===a&&(M=l.next())&&!M.done&&(f=M.value,a=f.length,i=0);return T}function Bf(e,t){return Gf(e,t,(s,o)=>g(s,o))}function jf(e,t){switch(e._typeId){case Ge:{let s=e._arrayLike(),o=s.length,u=0;for(;u<o;)t(s[u]),u++;return}default:{let s=e._arrayLikeIterator(),o;for(;(o=s.next())&&!o.done;){let u=o.value,l=u.length,n=0;for(;n<l;){let m=u[n];t(m),n++}}return}}}function pu(e){return e.length===0}var Gn=Ev;function Ev(e,t){switch(e._typeId){case Ge:{let s=e._arrayLike(),o=s.length,u=0,l=O();for(;u<o;){let n=s[u];t(n)&&(l=Q(l,n)),u++}return l}default:{let s=e._arrayLikeIterator(),o,u=O();for(;(o=s.next())&&!o.done;){let l=o.value,n=l.length,m=0;for(;m<n;){let i=l[m];t(i)&&(u=Q(u,i)),m++}}return u}}}function au(e,t){return e._get(t)}function Bn(e,t){return e._prepend(t)}function ps(e,t){return e._concat(t)}var du="(@effect/core) _src/io/Queue/definition/common.ts",Xf=Symbol.for("@effect/core/io/Queue"),Mv={get[Xf](){return Xf},isFull(e){return v(this.size,t=>t===this.capacity,du+":115:25")},isEmpty(e){return v(this.size,t=>t===0,du+":118:25")}},Iv={poll(e){return v(this.takeUpTo(1,du+":124:25"),t=>Le(t),du+":124:32")},takeN(e,t){return this.takeBetween(e,e)},takeBetween(e,t){return I(()=>Jf(this,e,t,O(),du+":130:51"),du+":130:33")}},Zf={...Mv,...Iv};function Jf(e,t,s,o,u){return s<t?C(o,u):d(e.takeUpTo(s,u),l=>{let n=t-l.length;return n===1?v(e.take,m=>Q(ps(o,l),m),u):n>1?d(e.take,m=>Jf(e,n-1,s-l.length-1,Q(ps(o,l),m),u),u):C(ps(o,l),u)},u)}var Nv="(@effect/core) _src/io/Queue/operations/_internal/unsafeCompleteDeferred.ts";function cu(e,t){return e.unsafeDone(C(t,Nv+":2:47"))}function as(e,t){return e.offerAll(t)}function Se(e){return e.pollUpTo(Number.MAX_SAFE_INTEGER)}function fu(e,t,s){let o=!0;for(;o&&!t.isEmpty;){let u=s.poll(bt);if(u!==bt){let l=t.poll(bt);l!==bt?(cu(u,l),e.unsafeOnQueueEmptySpace(t,s)):as(s,Bn(Se(s),u)),o=!0}else o=!1}}function V_(e,t){return e.pollUpTo(t)}function Yf(e,t){as(e,Gn(Se(e),s=>t!==s))}var ds=class{constructor(t,s,o){this.nextKey=t,this.exit=s,this.update=o,this._tag="Exited"}},cs=class{constructor(t,s,o){this.nextKey=t,this._finalizers=s,this.update=o,this._tag="Running"}finalizers(){return this._finalizers}};var q="(@effect/core) _src/io/Effect/operations/excl-forEach.ts";var th=jn;var eh=qv;function X_(e,t,s){return I(()=>{let o=[];return v(jn(e,u=>v(t(u),l=>{o.push(l)},s),s),()=>Et(o),s)},s)}function jn(e,t,s){return d(x(e,s),o=>sh(o[Symbol.iterator](),t),s)}function sh(e,t){let s=e.next();return s.done?F:j(t(s.value),()=>sh(e,t),q+":92:51")}function K_(e,t,s){return Qm(o=>Ct(o,()=>oh(e,t,s),u=>Cv(e,u,t,s)),s)}function oh(e,t,s){return I(()=>d(x(()=>[],s),o=>v(Vn(()=>zl(e(),(u,l)=>[u,l]),([u,l])=>d(I(()=>t(u),s),n=>x(()=>{o[l]=n},s),s),s),()=>Et(o),s),s),s)}function Cv(e,t,s,o){return I(()=>{if(t<1)return $c(()=>`Unexpected nonpositive value "${t}" passed to foreachParN`,o);let u=Et(e()),l=us(u);if(l===0)return C(O(),o);function n(m,i){return d(v(m.takeUpTo(1,o),_=>Le(_),o),_=>Ct(_,()=>F,({tuple:[a,p]})=>d(rs(s(a),f=>x(()=>{i[p]=f},o),o),()=>n(m,i),o)),o)}return d(x(()=>new Array(l),o),m=>d(lh(l,o),i=>d(i.offerAll(Bc(u),o),()=>v(Vn(()=>a_(n(i,m),t),st,o),()=>Et(m),o),o),o),o)},o)}function Av(e,t,s){return Qm(o=>Ct(o,()=>Vn(e,t,s),u=>Lv(e,u,t,s)),s)}function Vn(e,t,s){return I(()=>{let o=Et(e()),u=us(o);return u===0?F:ee(({restore:l})=>{let n=ou(Tt),m=new Rt(0);return d(Wn(i=>X_(()=>o,_=>xr(i(()=>Ot(l(()=>I(()=>t(_),s),s),a=>j(n.fail(()=>{},s),()=>te(a,s),s),()=>m.incrementAndGet()===u?(n.unsafeDone(F),F):F,s),s),s),s),s),i=>Ot(l(()=>n.await(s),s),_=>d(oh(()=>i,a=>Cf(a,s),s),a=>{let p=zn(a);return p._tag==="Some"&&p.value._tag==="Failure"?U(()=>Qs(vr(_),p.value.cause),s):U(()=>vr(_),s)},s),_=>jn(()=>i,a=>to(a,s),s),s),s)},s)},s)}function Lv(e,t,s,o){return I(()=>{let u=e(),l=Et(u),n=us(l);if(n===0)return F;function m(i){return d(v(i.takeUpTo(1,o),_=>Le(_),o),_=>Ct(_,()=>F,a=>d(s(a),()=>m(i),o)),o)}return d(lh(n,o),i=>d(i.offerAll(u,o),()=>Vn(()=>a_(m(i),t),st,o),o),o)},o)}function qv(e,t){return X_(e,st,t)}function uh(e,t){return jn(e,st,t)}function rh(e,t,s,o){return _s(e.ref.modify(u=>{switch(u._tag){case"Exited":return g(F,u);case"Running":switch(s._tag){case"Sequential":return g(d(X_(()=>Array.from(u.finalizers()).reverse(),([l,n])=>be(u.update(n)(t),o),o),l=>yt(()=>B(Lf(l),()=>Hn),o),o),new ds(u.nextKey,t,u.update));case"Parallel":return g(d(K_(()=>Array.from(u.finalizers()).reverse(),([l,n])=>be(u.update(n)(t),o),o),l=>yt(()=>B(zn(l),()=>Hn),o),o),new ds(u.nextKey,t,u.update));case"ParallelN":return g(zd(d(K_(()=>Array.from(u.finalizers()).reverse(),([l,n])=>be(u.update(n)(t),o),o),l=>yt(()=>B(zn(l),()=>Hn),o),o),s.n,o),new ds(u.nextKey,t,u.update))}}},o),o)}function lh(e,t){return d(x(()=>Of(e),t),s=>Ov(s,new Q_,t),t)}function Ov(e,t,s){return v(nu(s),o=>zv(e,$_(),o,new so(!1),t),s)}var Fv={...Zf,get capacity(){return this.queue.capacity},get size(){return I(()=>this.shutdownFlag.get?Oe:C(this.queue.size-this.takers.size+this.strategy.surplusSize,q+":639:28"),q+":636:33")},get awaitShutdown(){return this.shutdownHook.await(q+":646:62")},get isShutdown(){return x(()=>this.shutdownFlag.get,q+":649:26")},get shutdown(){return Ln(iu((e,t)=>(this.shutdownFlag.set(!0),qs(Pn(()=>this.shutdownHook.succeed(()=>{},q+":655:61"),()=>j(Av(()=>Se(this.takers),s=>s.interruptAs(()=>t,q+":661:47"),q+":657:35"),()=>this.strategy.shutdown,q+":662:14"),q+":654:31"),q+":663:13")),q+":652:37"),q+":664:23")},offer(e,t){return I(()=>{if(this.shutdownFlag.get)return Oe;let s;if(this.queue.isEmpty){let u=this.takers.poll(bt);u!==bt?(cu(u,e),s=!0):s=!1}else s=!1;if(s)return C(!0,q+":684:33");let o=this.queue.offer(e);return fu(this.strategy,this.queue,this.takers),o?C(!0,q+":694:28"):this.strategy.handleSurplus(mu(e),this.queue,this.takers,this.shutdownFlag,q+":695:61")},q+":667:33")},offerAll(e,t){return I(()=>{if(this.shutdownFlag.get)return Oe;let s=Et(e),o=this.queue.isEmpty?V_(this.takers,us(s)):O(),{tuple:[u,l]}=Dn(s,us(o));if(jf(Bf(o,u),({tuple:[m,i]})=>{cu(m,i)}),pu(l))return C(!0,q+":722:33");let n=as(this.queue,l);return fu(this.strategy,this.queue,this.takers),pu(n)?C(!0,q+":732:28"):this.strategy.handleSurplus(n,this.queue,this.takers,this.shutdownFlag,q+":733:61")},q+":704:33")},get take(){return iu((e,t)=>{if(this.shutdownFlag.get)return Oe;let s=this.queue.poll(bt);if(s!==bt)return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),C(s,q+":752:33");{let o=ou(t);return F_(I(()=>(this.takers.offer(o),fu(this.strategy,this.queue,this.takers),this.shutdownFlag.get?Oe:o.await(q+":766:94")),q+":759:37"),()=>x(()=>Yf(this.takers,o),q+":768:32"),q+":767:23")}},q+":742:37")},get takeAll(){return I(()=>this.shutdownFlag.get?Oe:x(()=>{let e=Se(this.queue);return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),e},q+":777:25"),q+":774:33")},takeUpTo(e,t){return I(()=>this.shutdownFlag.get?Oe:x(()=>{let s=V_(this.queue,e);return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),s},q+":791:25"),q+":788:33")}};function zv(e,t,s,o,u){return Object.setPrototypeOf({queue:e,takers:t,shutdownHook:s,shutdownFlag:o,strategy:u},Fv)}var Q_=class{constructor(){this.putters=$_()}handleSurplus(t,s,o,u,l){return iu((n,m)=>{let i=ou(m);return F_(I(()=>(this.unsafeOffer(t,i),this.unsafeOnQueueEmptySpace(s,o),fu(this,s,o),u.get?Oe:i.await(q+":846:66")),q+":842:35"),()=>x(()=>this.unsafeRemove(i),q+":847:42"),q+":847:21")},q+":839:37")}unsafeRemove(t){as(this.putters,Gn(Se(this.putters),({tuple:[,s]})=>s!==t))}unsafeOffer(t,s){let o=t;for(;us(o)>0;){let u=au(o,0);o=_u(o,1),us(o)===0?this.putters.offer(g(u,s,!0)):this.putters.offer(g(u,s,!1))}}unsafeOnQueueEmptySpace(t,s){let o=!0;for(;o&&!t.isFull;){let u=this.putters.poll(bt);if(u!==bt){let l=t.offer(u.get(0));l&&u.get(2)?cu(u.get(1),!0):l||as(this.putters,Bn(Se(this.putters),u)),fu(this,t,s)}else o=!1}}get surplusSize(){return this.putters.size}get shutdown(){return d(ne,t=>d(x(()=>Se(this.putters),q+":905:39"),s=>v(K_(()=>s,({tuple:[o,u,l]})=>l?u.interruptAs(()=>t,q+":908:78"):F,q+":906:26"),()=>{},q+":906:8"),q+":905:24"),q+":904:24")}};var J_=Symbol.for("@effect/html/data/Many");var nh,ih,hu=class{constructor(t){this.placeholders=t,this[nh]=J_,this[ih]=It}get toArray(){return this.placeholders}};nh=J_,ih=It;var Y_="(@effect/html) _src/data/Many/operations/from.ts";function wr(e){return v(eh(()=>e.map(t=>t instanceof J?t:C(t,Y_+":15:29")),Y_+":10:27"),t=>new hu(nd(t)),Y_+":16:10")}function _h(e){return e.tuple}var tp=Symbol.for("@effect/html/io/WeakCache"),i5=Symbol.for("@effect/html/io/WeakCache/K"),m5=Symbol.for("@effect/html/io/WeakCache/V");var ph,Kn=class{constructor(t){this.map=t,this[ph]=tp}};ph=tp;function ah(e){return new Kn(new WeakMap(zl(e,t=>_h(t))))}function dh(...e){return ah(e)}function fs(){return dh()}function oo(e,t,s){return e.map.set(t,s),s}function ch(e,t){return e.map.get(t)}function xu(e,t,s){let o=ch(e,t);return o??s()}var op=Symbol.for("@effect/html/data/Portal");var fh,Xn=class{constructor(t,s,o){this.children=t,this.entry=s,this.wire=o,this[fh]=op}};fh=op;function gu(){return new Xn([],void 0,void 0)}function xh(e){return e.template}function Zn(e){return e.template}function gh(e){return e.type}function yh(e){return e.type}function Jn(e){return e.type==="svg"}var Gv=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i,Bv=/<([a-z]+[a-z0-9:._-]*)([^>]*?)(\/?)>/g,jv=/([^\s\\>"'=]+)\s*=\s*(['"]?)\x01/g,Vv=/[\x01\x02]/g;function yu(e){let t=0;return e.template.join("").trim().replace(Bv,(s,o,u,l)=>{let n=o+u.replace(jv,"=$2$1").trimEnd();return l.length&&(n+=Jn(e)||Gv.test(o)?" /":"></"+o),"<"+n+">"}).replace(Vv,s=>s===""?"<!--"+ue+t+++"-->":ue+t++)}function Kv(e){let t=document.createElement("template");return t.innerHTML=e,t.content}function Qv(e){let t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.innerHTML=e;let s=document.createDocumentFragment();return s.append(...t.childNodes),s}function Sh(e){return Jn(e)?Qv(yu(e)):Kv(yu(e))}function kr(e){return e instanceof So}var np=Symbol.for("@effect/html/data/Handler");var vh,wh,Yn=class{constructor(t){this.eventListener=t,this[vh]=np,this[wh]=It}};vh=np,wh=It;function ip(e){return e instanceof Yn}function mp(e){return e.eventListener}var _p=Symbol.for("@effect/html/data/None");var Mh,Ih,bu=class{constructor(){this[Mh]=It,this[Ih]=_p}[(Mh=It,Ih=_p,h.sym)](t){return t instanceof bu}[c.sym](){return E("effect/html/None")}};function pp(e){return e instanceof bu}function ap(e){return e instanceof hu}function Er(e){return e.values}var ei=class{},si=class{},oi=class{},ui=class{},ri=class{},li=class{};var dp=Symbol.for("@effect/html/data/Template"),Mr={$:{},NoNextSiblingException:ei,InvalidElementException:ui,NoParentNodeException:si,NoTextNodeException:oi,MissingAttributeNameException:li,MissingNodeException:ri};var Ch,ni=class{constructor(t,s){this.content=t,this.nodes=s,this[Ch]=dp}};Ch=dp;function Ah(e,t){return new ni(e,t)}function Lh(e){return document.importNode(e.content,!0)}var ii=class{},mi=class{};var cp=Symbol.for("@effect/html/data/Wire"),ve={$:{},ELEMENT_NODE:1,NODE_TYPE:111,NoFirstChildException:ii,NoLastChildException:mi};function qh(e){if(e.firstChild==null)throw new ve.NoFirstChildException;return e.firstChild}function Oh(e){if(e.lastChild==null)throw new ve.NoLastChildException;return e.lastChild}function Fh(e){return new Su(e,[...e.childNodes],e.firstChild,e.lastChild)}function zh(e){if(e.firstChild==null)throw new ve.NoFirstChildException;if(e.lastChild==null)throw new ve.NoLastChildException;let t=document.createRange();return t.setStartAfter(e.firstChild),t.setEndAfter(e.lastChild),t.deleteContents(),e.firstChild}function Ir(e){return e.node.childNodes.length!==e.nodes.length&&e.node.append(...e.nodes),e.node}var Hh,Su=class{constructor(t,s,o,u){this.node=t,this.nodes=s,this.firstChild=o,this.lastChild=u,this.ELEMENT_NODE=ve.ELEMENT_NODE,this.nodeType=ve.NODE_TYPE,this[Hh]=cp}};Hh=cp;function uo(e){return e instanceof Su}var fp=Symbol.for("@effect/html/data/ElementRef");var Uh,$h,uw="(@effect/html) _src/data/ElementRef/operations/_internal/ElementRefInternal.ts",pi=class{constructor(t){this.ref=t,this[Uh]=fp,this[$h]=It}get current(){return C(this.ref.get,uw+":13:29")}};Uh=fp,$h=It;function Ph(e){return e instanceof pi}function vu(e){return e==null?S:w(e)}function Dh(e){return e instanceof Node}function lw(e){return e instanceof Element}function nw(e){return e instanceof DocumentFragment}function iw(e,t){if(e==null)throw new Mr.MissingNodeException;return uo(e)?1/t<0?t?zh(e):Oh(e):t?Ir(e):qh(e):e}function mw(e,t,s,o,u){let l=s.length,n=t.length,m=l,i=0,_=0,a=null;for(;i<n||_<m;)if(n===i){let p=m<l?_?o(s[_-1],-0).nextSibling:o(s[m-_],0):u;for(;_<m;)e.insertBefore(o(s[_++],1),p)}else if(m===_)for(;i<n;)(!a||!a.has(t[i]))&&e.removeChild(o(t[i],-1)),i++;else if(t[i]===s[_])i++,_++;else if(t[n-1]===s[m-1])n--,m--;else if(t[i]===s[m-1]&&s[_]===t[n-1]){let p=o(t[--n],-1).nextSibling;e.insertBefore(o(s[_++],1),o(t[i++],-1).nextSibling),e.insertBefore(o(s[--m],1),p),t[n]=s[m]}else{if(!a){a=new Map;let p=_;for(;p<m;)a.set(s[p],p++)}if(a.has(t[i])){let p=a.get(t[i]);if(_<p&&p<m){let f=i,b=1;for(;++f<n&&f<m&&a.get(t[f])===p+b;)b++;if(b>p-_){let M=o(t[i],0);for(;_<p;)e.insertBefore(o(s[_++],1),M)}else e.replaceChild(o(s[_++],1),o(t[i++],-1))}else i++}else e.removeChild(o(t[i++],-1))}return s}function Nr(e,t,s){if(e.parentNode==null)throw new Mr.NoParentNodeException;return mw(e.parentNode,t,s,iw,e)}function Gh(e,t,s,o){return e||(e=document.createTextNode("")),e.data=o,Nr(s,t,[e])}function _w(e){let t,s,o=[];return u=>{switch(typeof u){case"string":case"number":case"boolean":t!==u&&(t=u,o=Gh(s,o,e,u.toString()));break;case"object":case"undefined":if(u==null){t!=u&&(t=u,o=Nr(e,o,[]));break}if(Array.isArray(u)){if(t=u,u.length===0){o=Nr(e,o,[]);break}if(uo(u[0])||Dh(u[0])){o=Nr(e,o,u);break}o=Gh(s,o,e,String(u));break}t!==u&&(uo(u)||Dh(u))&&(t=u,o=Nr(e,o,nw(u)?u.childNodes:[u]));break}}}function pw(e,t){let s,o,u=t.slice(2);return!(t in e)&&(s=t.toLowerCase())in e&&(u=s.slice(2)),l=>{o!==l&&(o!=null&&e.removeEventListener(u,o),l!=null&&e.addEventListener(u,l),o=l)}}function aw(e,t){let s,o=!0,u=document.createAttributeNS(null,t);return l=>{s!==l&&(l==null?o||(e.removeAttributeNode(u),o=!0):(u.value=l,o&&(e.setAttributeNodeNS(u),o=!1)),s=l)}}function xp(e){let t;return s=>{t!==s&&(Ph(t)&&t.ref.set(S),t=s,s?.ref.set(vu(e)))}}function dw(e,t){if(t[0]==="o"&&t[1]==="n")return pw(e,t);switch(t){case"ref":return xp(e)}return aw(e,t)}function cw(e){let t;return s=>{t!=s&&(t=s,e.textContent=s??"")}}function fw(e,{name:t,path:s,type:o}){let u=s.reduceRight(({childNodes:l},n)=>{let m=l[n];if(m==null)throw new Mr.MissingNodeException;return m},e);if(o==="node")return _w(u);if(o==="attr"&&lw(u)){if(t==null)throw new Mr.MissingAttributeNameException;return dw(u,t)}return cw(u)}function Bh(e,t){return e.nodes.map(s=>fw(t,s))}var yI=new RegExp(`(<!--${ue}(\\d+)-->|\\s*${ue}(\\d+)=([^\\s>]))`,"g");var bI=xp(null);var gw=fs();function gp(e){let t=[],{parentNode:s}=e,o=e;for(;s;)t.push(Array.prototype.indexOf.call(s.childNodes,o)),o=s,s=o.parentNode;return t}var vw=/^(?:textarea|script|style|title|plaintext|xmp)$/;function Kh(e){let t=yu(e),s=Sh(e),o=document.createTreeWalker(s,129),u=[],l=e.template.length-1,n=0,m=`${ue}${n}`;for(;n<l;){let i=o.nextNode();if(!i)throw new Fm.InvalidTemplateException(t);if(i.nodeType===8&&i instanceof CharacterData)i.data===m&&(u.push({type:"node",path:gp(i),name:void 0}),m=`${ue}${++n}`);else if(i instanceof Element){for(;i.hasAttribute(m);)u.push({type:"attr",path:gp(i),name:i.getAttribute(m)}),i.removeAttribute(m),m=`${ue}${++n}`;vw.test(i.localName)&&i.textContent?.trim()===`<!--${m}-->`&&(i.textContent="",u.push({type:"text",path:gp(i),name:void 0}),m=`${ue}${++n}`)}}return Ah(s,u)}var yp=fs();var ai=class{},di=class{};var bp=Symbol.for("@effect/html/data/Entry"),Qh={$:{},MissingAttributeUpdateHandlerException:ai,MissingWireException:di};var Xh,ci=class{constructor(t,s,o,u,l){this.type=t,this.template=s,this.content=o,this.updates=u,this.wire=l,this[Xh]=bp}};Xh=bp;function Zh(e,t,s,o){return new ci(e,t,s,o,void 0)}function Jh(e){let t=xu(yp,e.template,()=>oo(yp,e.template,Kh(e))),s=Lh(t);return Zh(e.type,e.template,s,Bh(t,s))}function Yh(e,t){return(!e.entry||xh(e.entry)!==Zn(t)||gh(e.entry)!==yh(t))&&(e.entry=Jh(t)),e.entry}function Sp(e,t){return e.children[t]??(e.children[t]=gu())}function t1(e,t){e.children[t]=null}function e1(e,t,s){let o=s[t];kr(o)?s[t]=ro(Sp(e,t),o):ip(o)?s[t]=mp(o):pp(o)?s[t]=null:ap(o)?s[t]=fi(Sp(e,t),o.toArray):t1(e,t)}function o1(e,t){t<e.children.length&&e.children.splice(t)}function fi(e,t){let{length:s}=t;for(let o=0;o<s;o++)e1(e,o,t);return o1(e,s),t}function u1(e){return e.wire==null&&(e.content.firstChild===e.content.lastChild?e.content.lastChild!=null?e.wire=e.content.lastChild:e.wire=e.content:e.wire=Fh(e.content)),e.wire}function r1(e,t){for(let s=0;s<e.updates.length;s++){let o=e.updates[s];if(o==null)throw new Qh.MissingAttributeUpdateHandlerException;o(t[s])}return e}function ro(e,t){let s=Yh(e,t);return r1(s,fi(e,Er(t))),u1(s)}var Fw="(@effect/html) _src/data/Portal/operations/fixed.ts";function l1(e){return(t,s,o)=>v(wr(o),u=>ro(e,Vu(t,s,u)),Fw+":12:32")}function n1(e,t){let s=Xl(e,t,y(t));if(rt(s))throw new Mo;return s.value}function i1(e,t){return Xl(e,t,y(t))}function Tw(e,t){let s=new Map(this.unsafeMap);return s.set(e,t),new mt(s)}function m1(e){if(!this.unsafeMap.has(e))throw new Mo;return this.unsafeMap.get(e)}function Uw(e){return this.unsafeMap.has(e)?w(this.unsafeMap.get(e)):S}function $w(e){let t=new Map(this.unsafeMap);for(let[s,o]of e.unsafeMap)t.set(s,o);return new mt(t)}function Pw(...e){let t=new Set(e),s=new Map;for(let[o,u]of this.unsafeMap.entries())t.has(o)&&s.set(o,u);return new mt(s)}var p1=Symbol("@tsplus/stdlib/Env/Env"),mt=Object.assign(function e(t,s){return this!=null&&this.constructor===e?_1(t):mt.empty.add(t,s)},{sym:p1,empty:_1(new Map)});function _1(e){return{[p1]:st,add:Tw,get:m1,unsafeGet:m1,getMaybe:Uw,merge:$w,prune:Pw,unsafeMap:e}}var a1,d1=g1,c1=hi,f1=Symbol.for("@tsplus/stdlib/service/Patch");var h1={$:{}},lo=class{constructor(){this[a1]=f1}};a1=f1;var wp=class extends lo{constructor(){super(),this._tag="Empty"}},kp=class extends lo{constructor(t,s){super(),this.tag=t,this.service=s,this._tag="AddService"}},Ep=class extends lo{constructor(t,s){super(),this.first=t,this.second=s,this._tag="AndThen"}},Mp=class extends lo{constructor(t){super(),this.tag=t,this._tag="RemoveService"}},Ip=class extends lo{constructor(t,s){super(),this.tag=t,this.update=s,this._tag="UpdateService"}};function x1(e,t){let s={ref:!1},o=Dw(new Map(t.unsafeMap),Ce(e),s);if(!s.ref)return new mt(o);let u=new Map;for(let[l]of t.unsafeMap)o.has(l)&&(u.set(l,o.get(l)),o.delete(l));for(let[l,n]of o)u.set(l,n);return new mt(u)}function Dw(e,t,s){for(var o=e,u=t,l=s,n=e,m=t,i=s;;){if(W(u))return o;let _=u.head,a=u.tail;switch(_._tag){case"Empty":{n=o,m=a,i=l,o=n,u=m,l=i;continue}case"AddService":{n=o.set(_.tag,_.service),m=a,i=l,o=n,u=m,l=i;continue}case"AndThen":{n=o,m=pn(a,Ce(_.first,_.second)),i=l,o=n,u=m,l=i;continue}case"RemoveService":{n=(o.delete(_.tag),o),m=a,i=l,o=n,u=m,l=i;continue}case"UpdateService":{n=o.set(_.tag,_.update(o.get(_.tag))),m=a,i=(l.ref=!0,l),o=n,u=m,l=i;continue}}}}function g1(){return new wp}function hi(e,t){return new Ep(e,t)}function y1(e,t){let s=new Map(e.unsafeMap),o=g1();for(let[u,l]of t.unsafeMap.entries())if(s.has(u)){let n=s.get(u);s.delete(u),n!==l&&(o=hi(o,new Ip(u,()=>l)))}else s.delete(u),o=hi(o,new kp(u,l));for(let[u]of s.entries())o=hi(o,new Mp(u));return o}var hs=Object.assign(()=>({[hs.sym]:st,toEnv(e){return mt(this,e)}}),{sym:Symbol("@tsplus/stdlib/environment/Tag"),is:e=>typeof e=="object"&&e!=null&&hs.sym in e});var xi={Tag:hs,Env:mt,Patch:h1};var eN=Symbol.for("@effect/html/io/RenderContext"),Rr={$:{},Tag:xi.Tag()};var we=z.make(()=>Wt(mt.empty));function gi(e,t,s){return I(()=>d(Fl(we.value,s),o=>t(o.unsafeGet(e)),s),s)}function w1(e,t,s){return gi(e,o=>C(t(o),s),s)}var k1,E1,Bw,jw,Vw,M1,Kw,I1,se=Symbol.for("@effect/core/Layer");var Cp=class{constructor(){this[k1]=se}};k1=se;var yi=class{constructor(t){this.self=t,this._tag="LayerApply",this[E1]=se}};E1=se;Bw=se;jw=se;Vw=se;var bi=class extends Cp{constructor(t){super(),this.self=t,this._tag="LayerScoped"}},Si=class{constructor(t){this.self=t,this._tag="LayerSuspend",this[M1]=se}};M1=se;Kw=se;var vi=class{constructor(t,s,o){this.self=t,this.that=s,this.f=o,this._tag="LayerZipWithPar",this[I1]=se}};I1=se;function ku(e){return new Si(e)}var N1="(@effect/core) _src/io/Layer/operations/fromValue.ts";function wi(e,t){return ku(()=>new bi(v(x(t,N1+":9:55"),s=>mt(e,s),N1+":9:68")))}var C1=e=>wi(Rr.Tag,()=>({_tag:"RenderContext",context:e}));var Xw="(@effect/html) _src/io/RenderContext/operations/isDOM.ts";function Lp(){return w1(Rr.Tag,({context:e})=>e==="DOM",Xw+":5:28")}var qp=fs();function A1(e){return e.wire}function L1(e,t){e.wire=t}function q1(e,t){return U(()=>ss(e,Ut),t)}function ki(e){return tu(e,t=>hn(t)?w(t.value):S)}function F1(e){return Ct(ki(e),()=>ye(e),Jt)}function Ei(e,t,s){return Vc(e)?t(e.left):s(e.right)}function W1(e,t,s,o){return Ot(e,u=>Ei(F1(u),t,te),s,o)}function H1(e,t,s){return W1(e,o=>q1(t(o),s),C,s)}function T1(e,t){return H1(e,st,t)}var Op=class{constructor(t){this.exit=t,this._tag="Done"}},Fp=class{constructor(t){this.journal=t,this._tag="Suspend"}};function U1(e){return new Op(e)}function zp(e){return new Fp(e)}function Ar(e){return Yt(ss(e))}function Lr(e){return Yt(xn(e))}var D1,G1,B1;var no=Symbol.for("@effect/core/stm/STM/State");var Eu=class{constructor(t){this.exit=t,this._tag="Done",this[D1]=no}[(D1=no,c.sym)](){return k(E(this._tag),y(this.exit))}[h.sym](t){return Tp(t)&&this[c.sym]()===t[c.sym]()}},Wp=class{constructor(){this._tag="Interrupted",this[G1]=no}[(G1=no,c.sym)](){return E(this._tag)}[h.sym](t){return Tp(t)&&this[c.sym]()===t[c.sym]()}},Hp=class{constructor(){this._tag="Running",this[B1]=no}[(B1=no,c.sym)](){return E(this._tag)}[h.sym](t){return Tp(t)&&this[c.sym]()===t[c.sym]()}};function Tp(e){return typeof e=="object"&&e!=null&&no in e}function j1(e){switch(e._tag){case"Succeed":return new Eu(wt(e.value));case"Die":return new Eu(Ar(e.value));case"Fail":return new Eu(Lr(e.value));case"Interrupt":return new Eu(fr(e.fiberId));case"Retry":throw new Error("Bug: done being called on TExit.Retry")}}var V1=new Wp,qr=new Hp;function K1(e){return e._tag==="Running"}var Or=class{constructor(t){this.value=t,this._tag="Fail"}[c.sym](){return y(this.value)}[h.sym](t){return t instanceof Or&&N(this.value,t.value)}},Fr=class{constructor(t){this.value=t,this._tag="Die"}[c.sym](){return y(this.value)}[h.sym](t){return t instanceof Fr&&N(this.value,t.value)}},zr=class{constructor(t){this.fiberId=t,this._tag="Interrupt"}[c.sym](){return y(this.fiberId)}[h.sym](t){return t instanceof zr&&N(this.fiberId,t.fiberId)}},Wr=class{constructor(t){this.value=t,this._tag="Succeed"}[c.sym](){return y(this.value)}[h.sym](t){return t instanceof Wr&&N(this.value,t.value)}},nk=_l(),Hr=class{constructor(){this._tag="Retry"}[c.sym](){return $e(nk)}[h.sym](t){return t instanceof Hr}};function Mi(e){return new Wr(e)}function X1(e){return new Or(e)}function Z1(e){return new Fr(e)}function J1(e){return new zr(e)}var Up=new Hr;var Y1,tx=Symbol.for("@effect/core/stm/STM");var xs=class{constructor(){this[Y1]=tx}};Y1=tx;var ex,mk,_k,sx,ke=class extends xs{constructor(t){super(),this.f=t,this._tag="STMEffect"}},Ii=class extends xs{constructor(t,s){super(),this.stm=t,this.onFailure=s,this._tag="STMOnFailure"}apply(t){return new Tr(t)}};var Ni=class extends xs{constructor(t,s){super(),this.stm=t,this.apply=s,this._tag="STMOnSuccess"}};var Tr=class extends xs{constructor(t){super(),this.a=t,this._tag="STMSucceedNow"}},Ri=class extends xs{constructor(t){super(),this.a=t,this._tag="STMSucceed"}};var $p=Symbol.for("@effect/core/stm/STM/FailException"),Ci=class{constructor(t){this.e=t,this[ex]=$p}};ex=$p;function ox(e){return typeof e=="object"&&e!=null&&$p in e}var ux=Symbol.for("@effect/core/stm/STM/DieException");mk=ux;function rx(e){return typeof e=="object"&&e!=null&&ux in e}var lx=Symbol.for("@effect/core/stm/STM/InterruptException");_k=lx;function nx(e){return typeof e=="object"&&e!=null&&lx in e}var Pp=Symbol.for("@effect/core/stm/STM/RetryException"),Ai=class{constructor(){this[sx]=Pp}};sx=Pp;function ix(e){return typeof e=="object"&&e!=null&&Pp in e}function mx(e){return new Ri(e)}function _x(e){return new ke(()=>{throw new Ci(e())})}function Mu(e){return new Tr(e)}function Iu(e,t){return new Ni(e,t)}function io(e,t){return Iu(e,s=>Mu(t(s)))}function px(e,t,s){return Iu(e,o=>io(t(),u=>s(o,u)))}function jp(e,t){return px(e,t,(s,o)=>o)}function ax(e,t){return new Ii(e,t)}function dx(e,t,s){return Iu(ax(io(e,ye),o=>io(t(o),Jt)),o=>Ei(o,Mu,s))}function cx(e,t){return dx(e,s=>jp(t,()=>_x(()=>s)),s=>jp(t,()=>Mu(s)))}var Ur=class{constructor(t,s,o,u){this.self=t,this.journal=s,this.fiberId=o,this.yieldOpCount=2048,this.envStack=new V(u)}unwindStack(t,s){let o;for(;this.contStack&&o==null;){let u=this.contStack.value;this.contStack=this.contStack.previous,u._tag==="STMOnFailure"&&(s||(o=u.onFailure(t))),u._tag==="STMOnRetry"&&s&&(o=u.onRetry())}return o}run(){let t=this.self,s,o=0;for(;s==null&&t!=null;)if(o===this.yieldOpCount){let u=!0;for(let l of this.journal)u=l[1].use(n=>n.isValid());u?o=0:s=Up}else{let u=t;switch(u._tag){case"STMEffect":{try{let l=u.f(this.journal,this.fiberId,this.envStack.value);if(!this.contStack)s=Mi(l);else{let n=this.contStack.value;this.contStack=this.contStack.previous,t=n.apply(l)}}catch(l){if(ix(l))t=this.unwindStack(void 0,!0),t||(s=Up);else if(ox(l))t=this.unwindStack(l.e,!1),t||(s=X1(l.e));else if(rx(l))t=this.unwindStack(l.e,!1),t||(s=Z1(l.e));else if(nx(l))s=J1(l.fiberId);else throw l}break}case"STMOnSuccess":{this.contStack=new V(u,this.contStack),t=u.stm;break}case"STMOnFailure":{this.contStack=new V(u,this.contStack),t=u.stm;break}case"STMOnRetry":{this.contStack=new V(u,this.contStack),t=u.stm;break}case"STMProvide":{this.envStack=new V(u.f(this.envStack.value),this.envStack),t=cx(u.stm,mx(()=>{this.envStack=this.envStack.previous}));break}case"STMSucceedNow":{let l=u.a;if(!this.contStack)s=Mi(l);else{let n=this.contStack.value;this.contStack=this.contStack.previous,t=n.apply(l)}break}case"STMSucceed":{let l=u.a();if(!this.contStack)s=Mi(l);else{let n=this.contStack.value;this.contStack=this.contStack.previous,t=n.apply(l)}break}}o=o+1}return s}};var mo={running:!1,tasks:new ze};function fx(e){let t=mo.tasks;mo.tasks=new ze,t.forEach(s=>{s()}),mo.tasks.isEmpty?mo.running=!1:hx(e)}function hx(e=0){e>=2048?setTimeout(()=>fx(0),0):queueMicrotask(()=>fx(e+1))}function _o(e){mo.tasks.add(e),mo.running||(mo.running=!0,hx())}var yk="(@effect/core) _src/stm/STM/Journal.ts";function gx(e){for(let t of e)t[1].use(s=>s.commit())}function yx(e){let t="RO";for(let s of e)if(t=s[1].use(o=>o.isInvalid()?"I":o.isChanged()?"RW":t),t==="I")return t;return t}var Vp=Ye();function bk(e){let t=new Map;for(let s of e){let o=s[1].use(l=>l.tref),u=o.todo.get;for(let l of u)t.set(l.get(0),l.get(1));o.todo.set(Vp)}return t}function Sk(e){for(let t of e)t[1]()}function gs(e,t){let s=bk(t);return s.size>0&&_o(()=>Sk(s)),U1(e)}function vk(e,t,s){let o=!1;for(let u of t){let l=u[1].use(m=>m.tref),n=l.todo.get;if(!Uo(n,e)){let m=Ne(n,e,s);l.todo.set(m),o=!0}}return o}function wk(e,t){let s=new Map;for(let o of t){let u=o[0],l=o[1];!e.has(u)&&!l.use(n=>n.isNew)&&s.set(u,l)}return s}function bx(e,t,s,o){let u=new Map,l=new Ur(t,u,e,o).run(),n=yx(u);if(n==="RW")s.compareAndSet(qr,j1(l)),gx(u);else if(n==="I")throw new Error("Bug: invalid journal");switch(l._tag){case"Succeed":return gs(wt(l.value),u);case"Fail":return gs(Lr(l.value),u);case"Die":return gs(Ar(l.value),u);case"Interrupt":return gs(fr(e),u);case"Retry":return zp(u)}}function Sx(e,t,s){let o=new Map,u=new Ur(t,o,e,s).run(),l=yx(o);if(l==="RW"&&u._tag==="Succeed")gx(o);else if(l==="I")throw new Error("Bug: invalid journal");switch(u._tag){case"Succeed":return gs(wt(u.value),o);case"Fail":return gs(Lr(u.value),o);case"Die":return gs(Ar(u.value),o);case"Interrupt":return gs(fr(e),o);case"Retry":return zp(o)}}function vx(e,t){t(yt(()=>e,yk+":229:16"))}function xx(e,t,s,o,u,l,n,m){for(;;)if(vk(s,m,()=>Kp(void 0,e,t,s,o,u)(l)),Ek(m)){let i=bx(e,t,o,u);switch(i._tag){case"Done":{vx(i.exit,l);return}case"Suspend":{let _=wk(n,i.journal);if(_.size>0){for(let a of _)n.set(a[0],a[1]);m=_}break}}}else return}function Kp(e,t,s,o,u,l){return n=>{if(K1(u.get))if(e==null){let m=bx(t,s,u,l);switch(m._tag){case"Done":{vx(m.exit,n);break}case"Suspend":{xx(t,s,o,u,l,n,m.journal,m.journal);break}}}else xx(t,s,o,u,l,n,e,e)}}function kk(e){let t=!0;for(let s of e)if(t=s[1].use(o=>o.isValid()),!t)return t;return t}function Ek(e){return!kk(e)}var wx,kx=Symbol.for("@effect/core/stm/STM/Versioned"),$r=class{constructor(t){this.value=t,this[wx]=kx}};wx=kx;function Ex(e){return new $r(e)}var Qp=Symbol.for("@effect/core/stm/TRef");var Mx,Li=class{constructor(t,s){this.versioned=t,this.todo=s,this[Mx]=Qp}};Mx=Qp;var Xp=Symbol.for("@effect/core/stm/TSemaphore");var Ix,qi=class{constructor(t){this.permits=t,this[Ix]=Xp}};Ix=Xp;var Zp=Symbol.for("@effect/core/io/Semaphore");var Nx,Oi=class{constructor(t){this.semaphore=t,this[Nx]=Zp}};Nx=Zp;var We=Symbol.for("@effect/core/io/Ref"),Jp=Symbol.for("@effect/core/io/Ref/Synchronized");var ys="(@effect/core) _src/io/Ref/operations/_internal/RefInternal.ts",Fi={get[We](){return We},getAndSet(e,t){return this.modify(s=>g(s,e),ys+":17:23")},getAndUpdate(e,t){return this.modify(s=>g(s,e(s)),ys+":25:23")},getAndUpdateSome(e,t){return this.modify(s=>g(s,B(e(s),()=>s)),ys+":34:23")},modifySome(e,t,s){return this.modify(o=>B(t(o),()=>g(e,o)),ys+":49:23")},update(e,t){return this.modify(s=>g(void 0,e(s)),ys+":56:23")},updateAndGet(e,t){return this.modify(s=>{let o=e(s);return g(o,o)},ys+":64:23")},updateSome(e,t){return this.modify(s=>g(void 0,B(e(s),()=>s)),ys+":76:23")},updateSomeAndGet(e,t){return this.modify(s=>{let o=B(e(s),()=>s);return g(o,o)},ys+":85:23")}};var zi="(@effect/core) _src/io/Ref/operations/_internal/AtomicInternal.ts",Wi=class{constructor(t){this.value=t}get get(){return this.value.get}getAndSet(t){let s=this.value.get;return this.value.set(t),s}getAndUpdate(t){let s=this.value.get;return this.value.set(t(s)),s}getAndUpdateSome(t){let s=this.value.get,o=t(s);return kt(o)&&this.value.set(o.value),s}modify(t){let s=this.value.get,{tuple:[o,u]}=t(s);return this.value.set(u),o}modifySome(t,s){let o=this.value.get,u=B(s(o),()=>g(t,o));return this.value.set(u.get(1)),u.get(0)}set(t){return this.value.set(t)}setAsync(t){return _o(()=>this.value.set(t))}update(t){let s=this.value.get;this.value.set(t(s))}updateAndGet(t){let s=this.value.get,o=t(s);return this.value.set(o),o}updateSome(t){let s=this.value.get,o=t(s);kt(o)&&this.value.set(o.value)}updateSomeAndGet(t){let s=this.value.get,o=t(s);return kt(o)?(this.value.set(o.value),o.value):s}},Rx={...Fi,get[We](){return We},get(e){return x(()=>this.unsafe.get,zi+":99:26")},modify(e,t){return x(()=>this.unsafe.modify(e),zi+":102:26")},set(e,t){return x(()=>this.unsafe.set(e),zi+":105:26")},setAsync(e,t){return x(()=>this.unsafe.setAsync(e),zi+":108:26")}};var Cx,Ax,Lx=Symbol.for("@effect/core/stm/STM/Entry"),Hi=class{constructor(t){this.use=t,this[Cx]=Lx}};Cx=Lx;function Ti(e,t){let s=e.versioned,o=new Pr(e,s,s.value,t,!1);return new Hi(u=>u(o))}var qx=Symbol.for("@effect/core/stm/STM/Entry/Ops"),Pr=class{constructor(t,s,o,u,l){this[Ax]=qx,this.tref=t,this.expected=s,this.newValue=o,this.isNew=u,this._isChanged=l}unsafeSet(t){this._isChanged=!0,this.newValue=t}unsafeGet(){return this.newValue}commit(){this.tref.versioned=Ex(this.newValue)}copy(){let t=new Pr(this.tref,this.expected,this.newValue,this.isNew,this.isChanged());return new Hi(s=>s(t))}isInvalid(){return!this.isValid()}isValid(){return this.tref.versioned===this.expected}isChanged(){return this._isChanged}toString(){return`Entry(expected.value = ${this.expected.value}, newValue = ${this.newValue}, tref = ${this.tref}, isChanged = ${this.isChanged()})`}};Ax=qx;function Ui(e,t){if(t.has(e))return t.get(e);let s=Ti(e,!1);return t.set(e,s),s}function $i(e,t){return Ui(e,t).use(o=>o.unsafeGet())}function Pi(e,t,s){Ui(e,s).use(u=>u.unsafeSet(t))}function Wx(e,t){return new ke(s=>{if(t<0)throw new Oo(`Unexpected negative value ${t} passed to acquireN`);let o=$i(e.permits,s);if(o<t)throw new Ai;return Pi(e.permits,o-t,s)})}var Nk=new Rt(0);function Hx(){return Nk.incrementAndGet()}var Tx=Ck;function Ck(e,t,s){return Vo(o=>Ct(e(o),()=>Jt(F),ye),()=>t,s)}var Ux=Lk,$x=Px;function Lk(e,t){return Px(e,Tt,t)}function Px(e,t,s){return Tx(o=>(e(o),S),t,s)}function Gx(e,t,s){return Ot(e,t,C,s)}function Nu(e){return I(()=>Fl(we.value,e),e)}function Di(e,t){return d(Nu(t),e,t)}function jx(e,t){return Di(s=>iu((o,u)=>{let l=Sx(u,e,s);switch(l._tag){case"Done":throw new al.Error(l.exit,t);case"Suspend":{let n=Hx(),m=new dt(qr),i=Ux(Kp(l.journal,u,e,n,m,s),t);return ee(({restore:_})=>Gx(_(()=>i,t),a=>{m.compareAndSet(qr,V1);let p=m.get;return p._tag==="Done"?yt(()=>p.exit,t):U(()=>a,t)},t),t)}}},t),t)}function Dr(e,t){return jx(e,t)}function Kx(e){return new ke(e)}function Qx(e,t){return Kx(s=>{if(t<0)throw new Oo(`Unexpected negative value ${t} passed to releaseN`);let o=$i(e.permits,s);return Pi(e.permits,o+t,s)})}function Gi(e,t,s){return I(()=>new Rl(e,t(),s),s)}function Zx(e,t,s){return o=>ee(({restore:u})=>j(u(()=>Dr(Wx(e,t),s),s),()=>Gi(u(()=>o,s),()=>Dr(Qx(e,t),s),s),s),s)}function Jx(e,t){return s=>Zx(e,1,t)(s)}function Bi(e,t){return s=>Jx(e.semaphore,t)(s)}var $="(@effect/core) _src/io/Ref/operations/_internal/SynchronizedInternal.ts",Yx={...Fi,get[We](){return We},get[Jp](){return Jp},get(e){return this.ref.get($+":25:24")},modifyEffect(e,t){return Bi(this.semaphore,$+":37:26")(d(d(this.get($+":38:15"),e,$+":38:25"),s=>{let{tuple:[o,u]}=s;return Yo(this.ref.set(u,$+":41:28"),()=>o,$+":41:34")},$+":38:36"))},set(e,t){return Bi(this.semaphore,$+":50:26")(this.ref.set(e,$+":50:50"))},setAsync(e,t){return Bi(this.semaphore,$+":57:26")(this.ref.setAsync(e,$+":57:55"))},getAndUpdateEffect(e,t){return this.modifyEffect(s=>v(e(s),o=>g(s,o),$+":68:45"),$+":68:29")},getAndUpdateSomeEffect(e,t){return this.modifyEffect(s=>v(B(e(s),()=>C(s,$+":80:68")),o=>g(s,o),$+":80:76"),$+":80:29")},modify(e,t){return this.modifyEffect(s=>C(e(s),$+":83:54"),$+":83:29")},modifySomeEffect(e,t,s){return this.modifyEffect(o=>B(t(o),()=>C(g(e,o),$+":97:68")),$+":97:29")},updateEffect(e,t){return this.modifyEffect(s=>v(e(s),o=>g(void 0,o),$+":107:43"),$+":107:29")},updateAndGetEffect(e,t){return this.modifyEffect(s=>v(e(s),o=>g(o,o),$+":118:43"),$+":118:29")},updateSomeEffect(e,t){return this.modifyEffect(s=>v(B(e(s),()=>C(s,$+":131:68")),o=>g(void 0,o),$+":131:76"),$+":131:29")},updateSomeAndGetEffect(e,t){return this.modifyEffect(s=>v(B(e(s),()=>C(s,$+":144:68")),o=>g(o,o),$+":144:76"),$+":144:29")}};var ji=$k;function $k(e){return Object.setPrototypeOf({unsafe:new Wi(new dt(e))},Rx)}function eg(e){return new ke(t=>{let s=e(),o=new $r(s),u=new dt(Vp),l=new Li(o,u);return t.set(l,Ti(l,!0)),l})}function sg(e){return io(eg(()=>e),t=>new qi(t))}function og(e,t){return Dr(sg(e),t)}function ug(e,t){return v(og(e,t),s=>new Oi(s),t)}var jk="(@effect/core) _src/io/Effect/operations/do.ts",Ft=Vk,Ru=Kk;function Vk(e,t,s,o){return d(e,u=>v(s(u),l=>({...u,[t]:l}),o),o)}function Kk(e,t,s,o){return v(e,u=>({...u,[t]:s(u)}),o)}function Ee(){return C({},jk+":119:27")}var rg=lg;function lg(e,t){return x(()=>ji(e()),t)}function Ki(e,t){return v(Ft(Ft(Ee(),"ref",()=>lg(e,t),t),"semaphore",()=>ug(1,t),t),({ref:s,semaphore:o})=>Object.setPrototypeOf({ref:s,semaphore:o},Yx),t)}function He(e,t,s){return d(x(t,s),o=>qo(we.value,o,s)(e),s)}var Te="(@effect/html) _src/io/Hooks.ts",Qk=Wt(Sd());function ig(e,t){return d(rg(()=>O(),Te+":8:27"),s=>d(d(qo(Qk,w(s),Te+":9:44")(e()),t,Te+":9:75"),o=>v(d(s.get(Te+":12:14"),u=>uh(()=>u,Te+":12:60"),Te+":12:24"),()=>o,Te+":11:6"),Te+":9:21"),Te+":8:18")}function mg(e,t){return ku(()=>new yi(e()))}var _g="(@effect/core) _src/io/Layer/operations/environment.ts";function pg(){return mg(()=>Nu(_g+":8:56"),_g+":8:37")}function ag(e,t){return ku(()=>new vi(e,t(),(s,o)=>s.merge(o)))}var ta=class{constructor(){this._tag="Sequential"}};var Xi=new ta;function Gr(e,t){return e._addFinalizerExit(t)}function po(e,t){return e._close(t)}function fg(e,t,s,o){return _s(e.ref.modify(u=>{switch(u._tag){case"Exited":return g(F,u);case"Running":{let l=u.finalizers(),n=vu(l.get(t));return l.delete(t),g(Ct(n,()=>F,m=>u.update(m)(s)),new cs(u.nextKey,l,u.update))}}},o),o)}function sa(e){return e+1}function hg(e,t,s){return _s(e.ref.modify(o=>{switch(o._tag){case"Exited":return g(v(t(o.exit),()=>S,s),new ds(sa(o.nextKey),o.exit,o.update));case"Running":{let u=o.finalizers().set(o.nextKey,t);return g(x(()=>w(o.nextKey),s),new cs(sa(o.nextKey),u,o.update))}}},s),s)}function oa(e,t,s){return v(hg(e,t,s),o=>Ct(o,()=>()=>F,u=>l=>fg(e,u,l,s)),s)}var xg=rh;var ua=class{constructor(t){this.ref=t}};function gg(e){return new ua(e)}var r3="(@effect/core) _src/io/Scope/ReleaseMap/operations/make.ts";var yg=x(l3,r3+":9:35");function l3(){return gg(ji(new cs(0,new Map,st)))}var ra=Symbol.for("@effect/core/io/Scope"),la=Symbol.for("@effect/core/io/Scope/Closeable"),Zi={$:{},Tag:hs()};var Sg,vg,Ji=class{constructor(t,s,o){this._fork=t,this._addFinalizerExit=s,this._close=o,this[Sg]=ra,this[vg]=la}};Sg=ra,vg=la;var oe="(@effect/core) _src/io/Scope/operations/makeWith.ts",wg=kg;function kg(e){return v(yg,t=>new Ji(Ln(v(rs(Ft(Ft(Ee(),"scope",()=>kg(()=>Xi),oe+":16:16"),"finalizer",({scope:s})=>oa(t,o=>po(s,()=>o),oe+":17:59"),oe+":17:16"),({finalizer:s,scope:o})=>Gr(o,s),oe+":18:15"),({scope:s})=>s,oe+":19:15"),oe+":20:27"),s=>qs(oa(t,s,oe+":21:38"),oe+":21:54"),s=>I(()=>qs(xg(t,s(),e(),oe+":24:34"),oe+":24:68"),oe+":23:32")),oe+":12:29")}var Yi=wg(()=>Xi);function me(e,t,s){switch(e._tag){case"Failure":return t(e.cause);case"Success":return s(e.value)}}function em(e,t,s,o){return ee(({restore:u})=>d(e(),l=>d(be(I(()=>u(()=>t(l),o),o),o),n=>Ot(I(()=>s(l,n),o),m=>U(()=>me(n,i=>Qt(i,m),()=>m),o),()=>yt(()=>n,o),o),o),o),o)}function na(e,t,s){return em(()=>F,()=>e,(o,u)=>t(u),s)}function Ig(e,t){return gi(Zi.Tag,e,t)}function Ng(e,t,s){return Di(o=>He(e,()=>t(o),s),s)}var Rg="(@effect/core) _src/io/Scope/operations/extend.ts";function Cg(e,t){return I(()=>Ng(t(),s=>s.merge(mt(Zi.Tag,e)),Rg+":15:36"),Rg+":14:31")}var zt="(@effect/core) _src/io/Effect/operations/zipWithPar.ts";function Lg(e,t,s,o){let u=(l,n)=>s(n,l);return Wn(l=>wn(n=>new Ml(()=>l(()=>e,o),()=>l(t,o),(m,i)=>Ag(n.id,s,!0,m,i),(m,i)=>Ag(n.id,u,!1,m,i)),o),o)}function Ag(e,t,s,o,u){return d(yr(o,zt+":43:22"),l=>me(l,n=>d(Zo(u,e,zt+":46:26"),m=>me(m,i=>s?U(()=>Qs(n,i),zt+":49:44"):U(()=>Qs(i,n),zt+":49:89"),()=>U(()=>n,zt+":50:35")),zt+":46:43"),n=>d(yr(u,zt+":54:20"),m=>me(m,i=>U(()=>i,zt+":56:45"),i=>j(j(to(o,zt+":57:38"),()=>to(u,zt+":57:60"),zt+":57:42"),()=>x(()=>t(n,i),zt+":57:79"),zt+":57:64")),zt+":54:30")),zt+":43:32")}var c3=e=>(t,s,o)=>s[t[e]]?s[t[e]](t,t):o(t,t);var qg=c3("_tag");var A="(@effect/core) _src/io/Layer/memoMap.ts",Og=Fg;var ia=class{constructor(t){this.ref=t}getOrElseMemoize(t,s){return d(x(s,A+":22:26"),o=>_s(this.ref.modifyEffect(u=>{let l=vu(u.get(t));switch(l._tag){case"Some":{let{tuple:[n,m]}=l.value,i=na(n,_=>me(_,()=>F,()=>Gr(o,m)),A+":32:71");return x(()=>g(i,u),A+":39:34")}case"None":return v(Ru(Ru(Ft(Ft(Ft(Ee(),"observers",()=>Ki(()=>0,A+":43:61"),A+":43:20"),"deferred",()=>nu(A+":44:52"),A+":44:20"),"finalizerRef",()=>Ki(()=>()=>F,A+":45:64"),A+":45:20"),"resource",({deferred:n,finalizerRef:m,observers:i})=>ee(({restore:_})=>d(Ft(Ru(Ee(),"outerScope",()=>o,A+":49:31"),"innerScope",()=>Yi,A+":51:26"),({innerScope:a,outerScope:p})=>d(be(_(()=>d(zg(t,()=>a,A+":53:46"),f=>f(this),A+":53:66"),A+":53:30"),A+":54:30"),f=>{switch(f._tag){case"Failure":return j(j(n.failCause(()=>f.cause,A+":59:51"),()=>po(a,()=>f),A+":59:65"),()=>U(()=>f.cause,A+":61:51"),A+":60:59");case"Success":return Yo(j(j(j(m.set(b=>Pn(()=>i.modify(M=>g(M===1,M-1),A+":67:51"),()=>po(a,()=>b),A+":66:50"),A+":65:54"),()=>i.update(b=>b+1,A+":71:59"),A+":71:42"),()=>Gr(p,b=>d(m.get(A+":73:86"),M=>M(b),A+":73:96")),A+":72:42"),()=>n.succeed(()=>f.value,A+":75:59"),A+":75:42"),()=>f.value,A+":76:36")}},A+":55:33"),A+":52:29"),A+":47:43"),A+":46:25"),"memoized",({deferred:n,finalizerRef:m,observers:i})=>g(na(n.await(A+":84:33"),_=>me(_,()=>F,()=>i.update(a=>a+1,A+":89:47")),A+":85:28"),_=>d(m.get(A+":92:66"),a=>a(_),A+":92:76")),A+":82:25"),({memoized:n,resource:m})=>g(m,x3(t)?u:u.set(t,n)),A+":94:19")}},A+":23:28"),A+":97:17"),A+":22:41")}};function h3(){return d(Ki(()=>new Map,A+":106:31"),e=>x(()=>new ia(e),A+":108:45"),A+":108:23")}function Fg(e,t,s){return d(Ft(Ft(Ee(),"memoMap",()=>h3(),s),"run",()=>zg(e,t,s),s),({memoMap:o,run:u})=>u(o),s)}function zg(e,t,s){return qg(e,{LayerApply:o=>x(()=>u=>o.self,s),LayerExtendScope:o=>x(()=>u=>Ig(l=>u.getOrElseMemoize(o.self,()=>l),s),s),LayerFold:o=>x(()=>u=>Ot(u.getOrElseMemoize(o.self,t),l=>u.getOrElseMemoize(o.failure(l),t),l=>u.getOrElseMemoize(o.success(l),t),s),s),LayerFresh:o=>x(()=>u=>Fg(o.self,t,s),s),LayerScoped:o=>x(()=>u=>Cg(t(),()=>o.self),s),LayerSuspend:o=>x(()=>u=>u.getOrElseMemoize(o.self(),t),s),LayerTo:o=>x(()=>u=>d(u.getOrElseMemoize(o.self,t),l=>He(u.getOrElseMemoize(o.that,t),()=>l,s),s),s),LayerZipWithPar:o=>x(()=>u=>Lg(u.getOrElseMemoize(o.self,t),()=>u.getOrElseMemoize(o.that,t),o.f,s),s)})}function x3(e){return e._tag==="LayerFresh"}function Wg(e,t,s){return em(()=>Yi,o=>d(Og(t,()=>o,s),u=>He(e,()=>u,s),s),(o,u)=>po(o,()=>u),s)}function Hg(e,t,s){return Wg(e,ag(pg(),()=>t),s)}var Tg,Ug;var Br=Symbol.for("@effect/core/io/TraceElement");var ma=class{constructor(){this._tag="NoLocation",this[Tg]=Br}[(Tg=Br,c.sym)](){return E(this._tag)}[h.sym](t){return $g(t)&&t._tag==="NoLocation"}},_a=class{constructor(t,s,o){this.fileName=t,this.lineNumber=s,this.columnNumber=o,this._tag="SourceLocation",this[Ug]=Br}[(Ug=Br,c.sym)](){return k(E(this._tag),k(E(this.fileName),k(Z(this.lineNumber),Z(this.columnNumber))))}[h.sym](t){return $g(t)&&this[c.sym]()===t[c.sym]()}};function $g(e){return typeof e=="object"&&e!=null&&Br in e}var pa=new ma,Pg=pa;function S3(e,t,s){return new _a(e,t,s)}var v3=/^(.*?):(\d*?):(\d*?)$/;function _e(e){if(e){let t=e.match(v3);if(t){let s=t[1].trim(),o=Number.parseInt(t[2]),u=Number.parseInt(t[3]);return S3(s,o,u)}return pa}return pa}function Dg(e){switch(e._tag){case"NoLocation":return"";case"SourceLocation":return`${e.fileName}:${e.lineNumber}:${e.columnNumber}`}}var w3=new Rt(0);function sm(e){return new tn(w3.getAndIncrement(),Math.floor(new Date().getTime()/1e3),e)}var da=Symbol.for("@effect/core/io/Random"),om={$:{},Tag:xi.Tag()};var jg,Ue="(@effect/core) _src/io/Random/operations/live.ts",Vg=z.make(()=>new ca(Math.random()*4294967296>>>0)),Kg=Vg,b6=wi(om.Tag,()=>Vg.value),ca=class{constructor(t){this.seed=t,this[jg]=da,this.PRNG=new wo(t)}get next(){return x(()=>this.PRNG.number(),Ue+":23:26")}get nextBoolean(){return d(this.next,t=>x(()=>t>.5,Ue+":27:51"),Ue+":27:29")}get nextInt(){return x(()=>this.PRNG.integer(0),Ue+":31:26")}nextRange(t,s,o){return d(this.next,u=>x(()=>(s-t)*u+t,Ue+":35:51"),Ue+":35:29")}nextIntBetween(t,s,o){return x(()=>this.PRNG.integer(s-t)+t,Ue+":43:26")}shuffle(t,s){return k3(t,o=>this.nextIntBetween(0,o,Ue+":50:62"),Ue+":50:23")}};jg=da;function k3(e,t,s){return I(()=>{let o=e();return v(rs(Ru(Ft(Ee(),"buffer",()=>x(()=>{let u=[];for(let l of o)u.push(l);return u},s),s),"swap",({buffer:u})=>(l,n)=>x(()=>{let m=u[l];return u[l]=u[n],u[n]=m,u},s),s),({buffer:u,swap:l})=>{let n=[];for(let m=u.length;m>=2;m=m-1)n.push(m);return th(()=>n,m=>d(t(m),i=>l(m-1,i),s),s)},s),({buffer:u})=>u,s)},s)}var fa=Symbol.for("@effect/core/io/Clock"),Qg={$:{},Scheduler:{},Tag:hs()},M3=2**31-1;var ha={unsafeSchedule(e,t){if(t.millis>M3)return Rd;let s=!1,o=setTimeout(()=>{s=!0,e()},t.millis);return()=>(clearTimeout(o),!s)}};function Xg(e){return new Lo(e,y1,(t,s)=>c1(t,s),t=>s=>x1(t,s),d1())}var Zg,Cu="(@effect/core) _src/io/Clock/operations/live.ts",um=class{constructor(){this[Zg]=fa}get currentTime(){return x(()=>this.unsafeCurrentTime,Cu+":7:26")}get unsafeCurrentTime(){return new Date().getTime()}get scheduler(){return x(()=>ha,Cu+":15:26")}sleep(t,s){return d(x(t,Cu+":19:26"),o=>Kc(u=>{let l=ha.unsafeSchedule(()=>u(F),o);return Jt(x(l,Cu+":22:42"))},Cu+":20:28"),Cu+":19:44")}};Zg=fa;var Jg=z.make(()=>mt(Qg.Tag,new um).add(om.Tag,Kg.value)),Yg=Jg,ty=z.make(()=>Xg(Jg.value));var $t=class{constructor(t){this.internalMap=t}[Symbol.iterator](){let t=this.internalMap[Symbol.iterator]();return{next:()=>{let s=t.next();return s.done?{done:!0,value:void 0}:{done:!1,value:g(s.value[0],s.value[1])}}}}[h.sym](t){if(t instanceof $t&&this.internalMap.size===t.internalMap.size){for(let[s,o]of t.internalMap)if(this.internalMap.has(s)){let u=this.internalMap.get(s);if(!N(u,o))return!1}else return!1;return!0}return!1}[c.sym](){let t=E("ImmutableMap");for(let s of this)t^=k(y(s.get(0)),y(s.get(1)));return $e(t)}};function Vr(e){let t=new Map;for(let{tuple:[s,o]}of e)t.set(s,o);return new $t(t)}function sy(...e){return Vr(e)}var bs=class{constructor(t,s,o,u=()=>{},l=()=>{},n=()=>{}){this.value=t,this.unsafeOnStart=s,this.unsafeOnEnd=o,this.unsafeOnEffect=u,this.unsafeOnSuspend=l,this.unsafeOnResume=n}};var rm=class extends bs{constructor(t){super(t,()=>{},()=>{})}};var ao=new rm(F);function uy(e,t){switch(e._tag){case"Failure":return e;case"Success":return t(e.value)}}function Au(e){return uy(e,st)}function Ss(e){let t=$o(H());for(let s of e)tt(t,s);return Po(t)}function nm(e){return Ht(ly(e))}function ly(e){switch(e._tag){case"None":return K(()=>Do());case"Runtime":return K(()=>Ss([e.id]));case"Composite":{let t=K(()=>H());for(let s of e.fiberIds)t=je(ot(()=>ly(s)),()=>t,(o,u)=>ts(o,u));return t}}}function iy(e,t){let s=H();return Go(s,o=>{Re(e,u=>{let l=t(u);Jo(o,l)||tt(o,l)})})}function my(e,t){let s=H();return Go(s,o=>{Re(e,u=>{for(let l of t(u))Jo(o,l)||tt(o,l)})})}function Lu(e,t,s){return nn(e._keyMap,t,(o,u)=>s(o,u))}function _y(e){return ge(eu(e,xt(),(t,s)=>fn(s)?w(it(t,s.value)):S))}function py(e){return W(e)?S:w(e.head)}function im(e,t){return rt(e)?S:w(t(e.value))}function dy(e,t){return B(im(ki(e),t),()=>{if(Rn(e)){let s=Lu(my(Cn(e),o=>iy(nm(o),u=>`#${u}`)),"",(o,u)=>`${o}, ${u}`);return new Fs(`Interrupted by fibers: ${s}`)}return B(py(_y(e)),()=>new Fs)})}var qu=class{constructor(t){this.millis=t}[h.sym](t){return t instanceof qu&&this.millis===t.millis}[c.sym](){return Z(this.millis)}};function cy(e,t){return e.millis<=t.millis}function fy(e,t){return e.millis===t.millis}function co(e,t){return wd(e,t,N)}var vy,xy,gy,yy,by,Sy;var wy=Symbol.for("@effect/core/io/Metric/MetricKeyType");var ba=Symbol.for("@effect/core/io/Metric/MetricKeyType/Counter"),Sa=Symbol.for("@effect/core/io/Metric/MetricKeyType/Frequency"),va=Symbol.for("@effect/core/io/Metric/MetricKeyType/Gauge"),wa=Symbol.for("@effect/core/io/Metric/MetricKeyType/Histogram"),ka=Symbol.for("@effect/core/io/Metric/MetricKeyType/Summary"),fo=class{constructor(){this[vy]=wy}};vy=wy;var Kr=class extends fo{constructor(){super(...arguments),this[xy]=ba}[(xy=ba,c.sym)](){return E("ets/Metrics/MetricKeyType/Counter")}[h.sym](t){return W3(t)}},mm=class extends fo{constructor(){super(...arguments),this[gy]=va}[(gy=va,c.sym)](){return E("ets/Metrics/MetricKeyType/Gauge")}[h.sym](t){return H3(t)}},Qr=class extends fo{constructor(){super(...arguments),this[yy]=Sa}[(yy=Sa,c.sym)](){return E("ets/Metrics/MetricKeyType/Frequency")}[h.sym](t){return T3(t)}},Xr=class extends fo{constructor(t){super(),this.boundaries=t,this[by]=wa}[(by=wa,c.sym)](){return k(E("ets/Metrics/MetricKeyType/Histogram"),y(this.boundaries))}[h.sym](t){return U3(t)&&N(this.boundaries,t.boundaries)}},_m=class extends fo{constructor(t,s,o,u){super(),this.maxAge=t,this.maxSize=s,this.error=o,this.quantiles=u,this[Sy]=ka}[(Sy=ka,c.sym)](){return k(E("ets/Metrics/MetricKeyType/Summary"),k(y(this.maxAge),k(Z(this.maxSize),k(Z(this.error),y(this.quantiles)))))}[h.sym](t){return $3(t)&&fy(this.maxAge,t.maxAge)&&this.maxSize===t.maxSize&&this.error===t.error&&co(this.quantiles,t.quantiles)}};var ky=new Kr,Ey=new Qr;function My(e){return new Xr(e)}function W3(e){return typeof e=="object"&&e!=null&&ba in e}function H3(e){return typeof e=="object"&&e!=null&&va in e}function T3(e){return typeof e=="object"&&e!=null&&Sa in e}function U3(e){return typeof e=="object"&&e!=null&&wa in e}function $3(e){return typeof e=="object"&&e!=null&&ka in e}var Iy,Ny=D3;var Ea=Symbol.for("@effect/core/io/Metric/MetricKey"),Ou=class{constructor(t,s,o=H()){this.name=t,this.keyType=s,this.tags=o,this[Iy]=Ea}[(Iy=Ea,c.sym)](){return k(E(this.name),k(y(this.keyType),y(this.tags)))}[h.sym](t){return G3(t)&&this.name===t.name&&y(this.keyType)===y(t.keyType)&&Jl(this.tags,t.tags)}};function Ry(e){return new Ou(e,ky)}function Cy(e){return new Ou(e,Ey)}function Ay(e,t){return new Ou(e,My(t))}function D3(e,t){return Bs(t)===0?e:new Ou(e.name,e.keyType,ts(e.tags,t))}function G3(e){return typeof e=="object"&&e!=null&&Ea in e}var vs=class{constructor(t){this.array=t}[Symbol.iterator](){return this.array[Symbol.iterator]()}[h.sym](t){return t instanceof vs&&this.array.length===t.array.length&&this.array.every((s,o)=>N(s,t.array[o]))}[c.sym](){return pl(this.array)}};function qy(e){return new vs(Array.from(e))}function Oy(e,t){return new vs(e.array.map((s,o)=>t(s,o)))}var Fy,zy=Symbol.for("@tsplus/stdlib/collections/mutable/MutableHashMap");var am=class{constructor(){this[Fy]=zy,this.backingMap=new Map,this.length=new Rt(0)}get size(){return this.length.get}get(t){let s=y(t),o=this.backingMap.get(s);if(o==null)return S;let u=o;for(;u;){if(N(t,u.k))return w(u.v);u=u.next}return S}remove(t){let s=y(t),o=this.backingMap.get(s);if(o==null)return this;if(N(t,o.k))return o.next!=null?this.backingMap.set(s,o.next):this.backingMap.delete(s),this.length.decrementAndGet(),this;let u=o.next,l=o;for(;u;){if(N(t,u.k))return l.next=u.next,this.length.decrementAndGet(),this;l=u,u=u.next}return this}set(t,s){let o=y(t),u=this.backingMap.get(o);if(u==null)return this.backingMap.set(o,new dm(t,s)),this.length.incrementAndGet(),this;let l=u,n=u;for(;l;){if(N(t,l.k))return l.v=s,this;n=l,l=l.next}return this.length.incrementAndGet(),n.next=new dm(t,s),this}update(t,s){let o=y(t),u=this.backingMap.get(o);if(u==null)return this;let l=u;for(;l;){if(N(t,l.k))return l.v=s(l.v),this;l=l.next}return this}[(Fy=zy,Symbol.iterator)](){return Oy(qy(this.backingMap.values()),t=>g(t.k,t.v))[Symbol.iterator]()}},dm=class{constructor(t,s,o){this.k=t,this.v=s,this.next=o}[Symbol.iterator](){let t=this,s=0;return{next:()=>{if(t){let o=g(t.k,t.v);return t=t.next,s++,{value:o,done:!1}}else return{value:s,done:!0}}}}};function Wy(){return new am}var cm=class{constructor(t){this.unsafeUpdate=t}unsafeUpdateCache(t){return this.unsafeUpdate(t)}};function Hy(e,t){return{metricKey:e,metricState:t}}function ho(e){return rt(e)?void 0:e.value}var Gy,Ty,Uy,$y,Py,Dy;var By=Symbol.for("@effect/core/io/Metrics/MetricState");var Ma=Symbol.for("@effect/core/io/Metrics/MetricState/Counter"),Ia=Symbol.for("@effect/core/io/Metrics/MetricState/Gauge"),Na=Symbol.for("@effect/core/io/Metrics/MetricState/Frequency"),Ra=Symbol.for("@effect/core/io/Metrics/MetricState/Histogram"),Ca=Symbol.for("@effect/core/io/Metrics/MetricState/Summary");var xo=class{constructor(){this[Gy]=By}};Gy=By;var Aa=class extends xo{constructor(t){super(),this.count=t,this[Ty]=Ma}[(Ty=Ma,c.sym)](){return k(E("@effect/core/io/Metrics/MetricState/Counter"),Z(this.count))}[h.sym](t){return J3(t)&&this.count===t.count}},La=class extends xo{constructor(t){super(),this.value=t,this[Uy]=Ia}[(Uy=Ia,c.sym)](){return k(E("@effect/core/io/Metrics/MetricState/Gauge"),Z(this.value))}[h.sym](t){return Y3(t)&&this.value===t.value}},qa=class extends xo{constructor(t){super(),this.occurrences=t,this[$y]=Na}[($y=Na,c.sym)](){return k(E("@effect/core/io/Metrics/MetricState/Frequency"),Es(this.occurrences[Symbol.iterator]()))}[h.sym](t){return t0(t)&&Zl(this.occurrences,t.occurrences)}},Oa=class extends xo{constructor(t,s,o,u,l){super(),this.buckets=t,this.count=s,this.min=o,this.max=u,this.sum=l,this[Py]=Ra}[(Py=Ra,c.sym)](){return k(E("@effect/core/io/Metrics/MetricState/Histogram"),k(y(this.buckets),k(Z(this.count),k(Z(this.min),k(Z(this.max),Z(this.sum))))))}[h.sym](t){return e0(t)&&co(this.buckets,t.buckets)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}},Fa=class extends xo{constructor(t,s,o,u,l,n){super(),this.error=t,this.quantiles=s,this.count=o,this.min=u,this.max=l,this.sum=n,this[Dy]=Ca}[(Dy=Ca,c.sym)](){return k(E("@effect/core/io/Metrics/MetricState/Summary"),k(Z(this.error),k(y(this.quantiles),k(Z(this.count),k(Z(this.min),k(Z(this.max),Z(this.sum)))))))}[h.sym](t){return s0(t)&&this.error===t.error&&co(this.quantiles,t.quantiles)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}};function jy(e){return new Aa(e)}function Vy(e){return new La(e)}function Ky(e){return new qa(e)}function Qy(e,t,s,o,u){return new Oa(e,t,s,o,u)}function Xy(e,t,s,o,u,l){return new Fa(e,t,s,o,u,l)}function J3(e){return typeof e=="object"&&e!=null&&Ma in e}function Y3(e){return typeof e=="object"&&e!=null&&Ia in e}function t0(e){return typeof e=="object"&&e!=null&&Na in e}function e0(e){return typeof e=="object"&&e!=null&&Ra in e}function s0(e){return typeof e=="object"&&e!=null&&Ca in e}function Fu(e,t){return{update:e,get:t}}function zu(e,t){return{update:s=>(e.update(s),t(s)),get:e.get}}function Jy(e){return e._editable=!1,e}function Yy(e){let t=ln(Ye());for(let s of e)Ne(t,s.get(0),s.get(1));return Jy(t)}function tb(...e){return Yy(e)}var fm=e=>({compare:e});var sb=Object.assign(e=>({equals:e}),{$:{}});var ob=i0;function ub(e,t){return fm((s,o)=>e.compare(t(s),t(o)))}function i0(e){return(t,s)=>e.compare(t,s)===-1}var m0=(e,t)=>e<t?-1:e>t?1:0;var _0=fm(m0),Wu=_0;function hm(e,t){return Et(Array.from(e).sort((s,o)=>t.compare(s,o)))}function nb(e,t){if(e._typeId===pe)return new De(t(0,e.a));let s=O(),o=0;for(let u of e)s=Q(s,t(o,u)),o+=1;return s}function go(){return new za(O())}var za=class{constructor(t){this.chunk=t}append(t){return this.chunk=Q(this.chunk,t),this}build(){return this.chunk}};function xm(e){return e._get(0)}function ib(e){if(e.length===0)throw new re(1,1,e.length-1);return _u(e,1)}function Hu(e,t,s){switch(e._typeId){case pe:return s(t,e.a);case Ge:{let o=e._arrayLike(),u=o.length,l=t,n=0;for(;n<u;)l=s(l,o[n]),n++;return l}default:{let o=e._arrayLikeIterator(),u,l=t;for(;(u=o.next())&&!u.done;){let n=u.value,m=n.length,i=0;for(;i<m;){let _=n[i];l=s(l,_),i++}}return l}}}function mb(e){return e._get(e.length-1)}function _b(e,t){let s=e._arrayLikeIterator(),o,u=!0,l=0;for(;u&&(o=s.next())&&!o.done;){let n=o.value,m=n.length,i=0;for(;u&&i<m;){let _=n[i];t(_)?u=!1:(l++,i++)}}return Dn(e,l)}function ab(e){let t=0;return Fu(s=>{t=t+s},()=>jy(t))}function db(e,t){let s=t;return Fu(o=>{s=o},()=>Vy(s))}function cb(e){let t=0,s=new Map,o=l=>{t=t+1;let n=s.get(l)??0;s.set(l,n+1)},u=()=>tb(...Array.from(s.entries()).map(([l,n])=>g(l,n)));return Fu(o,()=>Ky(u()))}function fb(e){let t=e.keyType.boundaries.values,s=t.length,o=Array(s+1),u=Array(s),l=0,n=0,m=Number.MAX_VALUE,i=Number.MIN_VALUE;nb(hm(t,Wu),(p,f)=>{u[p]=f});let _=p=>{let f=0,b=s;for(;f!==b;){let M=Math.floor(f+(b-f)/2),T=u[M];p<=T?b=M:f=M,b===f+1&&(p<=u[f]?b=f:f=b)}o[f]=o[f]+1,l=l+1,n=n+p,p<m&&(m=p),p>i&&(i=p)},a=()=>{let p=go(),f=0,b=0;for(;f!=s;){let M=u[f],T=o[f];b=b+T,p.append(g(M,b)),f=f+1}return p.build()};return Fu(_,()=>Qy(a(),l,m,i,n))}function hb(e){let{error:t,maxAge:s,maxSize:o,quantiles:u}=e.keyType,l=hm(u,Wu),n=Array(o),m=0,i=0,_=0,a=Number.MAX_VALUE,p=Number.MIN_VALUE,f=M=>{let T=go(),X=0;for(;X!==o-1;){let at=n[X];if(at!=null){let{tuple:[Vt,ks]}=at,ju=new qu(M-Vt);ju.millis>=0&&cy(ju,s)&&T.append(ks)}X=X+1}return x0(t,l,hm(T.build(),Wu))},b=(M,T)=>{if(o>0){m=m+1;let X=m%o;n[X]=g(T,M)}i=i+1,_=_+M,M<a&&(a=M),M>p&&(p=M)};return Fu(({tuple:[M,T]})=>b(M,T),()=>Xy(t,f(Date.now()),i,a,p,_))}var Tu=class{constructor(t,s,o,u){this.quantile=t,this.value=s,this.consumed=o,this.rest=u}};function x0(e,t,s){let o=s.length;if(pu(t))return O();let u=xm(t),l=ib(t),n=Hu(l,mu(pb(e,o,S,0,u,s)),(m,i)=>{let _=xm(m);return Q(m,pb(e,o,_.value,_.consumed,i,_.rest))});return ls(n,m=>g(m.quantile,m.value))}function pb(e,t,s,o,u,l){for(var n=e,m=t,i=s,_=o,a=u,p=l,f=e,b=t,M=s,T=o,X=u,at=l;;){if(pu(p))return new Tu(a,S,_,O());if(a===1)return new Tu(a,w(mb(p)),_+p.length,O());let Vt=_b(p,qm=>qm>xm(p)),ks=a*m,ju=n/2*ks,bo=_+Vt.get(0).length,F2=Math.abs(bo-ks);if(bo<ks-ju){f=n,b=m,M=Le(p),T=bo,X=a,at=Vt.get(1),n=f,m=b,i=M,_=T,a=X,p=at;continue}if(bo>ks+ju)return new Tu(a,i,_,p);switch(i._tag){case"None":{f=n,b=m,M=Le(p),T=bo,X=a,at=Vt.get(1),n=f,m=b,i=M,_=T,a=X,p=at;continue}case"Some":{let qm=Math.abs(ks-i.value);if(F2<qm){f=n,b=m,M=Le(p),T=bo,X=a,at=Vt.get(1),n=f,m=b,i=M,_=T,a=X,p=at;continue}return new Tu(a,w(i.value),_,p)}}}}function Uu(e,t){return kt(e.get(t))}var gm=class{constructor(){this.map=Wy(),this.listeners=new Set,this.listener=new cm(t=>s=>{for(let o of this.listeners)o.unsafeUpdate(t)(s)})}installListener(t){this.listeners.add(t)}removeListener(t){this.listeners.delete(t)}snapshot(){let t=[];for(let{tuple:[s,o]}of this.map)t.push(Hy(s,o.get()));return Ss(t)}get(t){let s=ho(this.map.get(t));if(s==null){if(t.keyType instanceof Kr)return this.getCounter(t);if(t.keyType instanceof mm)return this.getGauge(t);if(t.keyType instanceof Qr)return this.getFrequency(t);if(t.keyType instanceof Xr)return this.getHistogram(t);if(t.keyType instanceof _m)return this.getSummary(t);throw new Error("Bug, unknown MetricKeyType")}else return s}getCounter(t){let s=ho(this.map.get(t));if(s==null){let o=this.listener.unsafeUpdate(t),u=zu(ab(t),o);Uu(this.map,t)||this.map.set(t,u),s=u}return s}getGauge(t){let s=ho(this.map.get(t));if(s==null){let o=this.listener.unsafeUpdate(t),u=zu(db(t,0),o);Uu(this.map,t)||this.map.set(t,u),s=u}return s}getFrequency(t){let s=ho(this.map.get(t));if(s==null){let o=this.listener.unsafeUpdate(t),u=zu(cb(t),o);Uu(this.map,t)||this.map.set(t,u),s=u}return s}getHistogram(t){let s=ho(this.map.get(t));if(s==null){let o=this.listener.unsafeUpdate(t),u=zu(fb(t),o);Uu(this.map,t)||this.map.set(t,u),s=u}return s}getSummary(t){let s=ho(this.map.get(t));if(s==null){let o=this.listener.unsafeUpdate(t),u=zu(hb(t),o);Uu(this.map,t)||this.map.set(t,u),s=u}return s}};var xb=z.make(()=>new gm);var gb="(@effect/core) _src/io/Metrics/definition.ts",yb=Symbol.for("@effect/core/io/Metric"),bb=function(e,t,s){return Object.assign((u,l)=>rs(u,n=>x(()=>t(n,H()),gb+":56:39"),gb+":56:17"),{[yb]:yb,keyType:e,unsafeUpdate:t,unsafeValue:s})};function $u(e){let t=s=>{let o=Ny(e,s);return xb.value.get(o)};return bb(e.keyType,(s,o)=>t(o).update(s),s=>t(s).get())}function Ua(e){return $u(Cy(e))}function ym(e){return $u(Ry(e))}function Sb(){return sb((e,t)=>e===t)}var vb=Sb();function wb(e,t,s){let o=u=>t.equals(u,s);for(let u=0;u<e.length;u++)if(o(au(e,u)))return!0;return!1}function kb(e,t){let s=O();for(let o=0;o<e.length;o++){let u=au(e,o);wb(s,t,u)||(s=Q(s,u))}return e.length===s.length?e:s}var Eb;var $a=Symbol.for("@effect/core/io/Metrics/Histogram/Boundaries"),Pa=class{constructor(t){this.values=t,this[Eb]=$a}[(Eb=$a,c.sym)](){return k(E("ets/Metrics/Histogram/Boundaries"),y(this.values))}[h.sym](t){return C0(t)&&co(this.values,t.values)}};function R0(e){return new Pa(kb(ps(e,mu(Number.MAX_VALUE)),vb))}function Mb(e,t,s){return R0(ls(yn(0,s-1),o=>e*Math.pow(t,o)))}function C0(e){return typeof e=="object"&&e!=null&&$a in e}function Ib(e,t){return $u(Ay(e,t))}var Nb,Rb,Cb;var yo=Symbol.for("@effect/core/Fiber/FiberStatus");var Da=class{constructor(){this._tag="Done",this[Nb]=yo}[(Nb=yo,c.sym)](){return E(this._tag)}[h.sym](t){return Ga(t)&&t._tag==="Done"}},bm=class{constructor(t){this.interrupting=t,this._tag="Running",this[Rb]=yo}[(Rb=yo,c.sym)](){return k(E(this._tag),y(this.interrupting))}[h.sym](t){return Ga(t)&&t._tag==="Running"&&this.interrupting===t.interrupting}},Sm=class{constructor(t,s,o,u,l){this.interrupting=t,this.interruptible=s,this.asyncs=o,this.blockingOn=u,this.asyncTrace=l,this._tag="Suspended",this[Cb]=yo}[(Cb=yo,c.sym)](){return k(E(this._tag),k(y(this.interrupting),k(y(this.interruptible),k(Z(this.asyncs),k(y(this.blockingOn),y(this.asyncTrace))))))}[h.sym](t){return Ga(t)&&t._tag==="Suspended"&&this.interrupting===t.interrupting&&this.interruptible===t.interruptible&&this.asyncs===t.asyncs&&N(this.blockingOn,t.blockingOn)}};function Ga(e){return typeof e=="object"&&e!=null&&yo in e}var Ab=new Da;function Zr(e){return new bm(e)}function Lb(e,t,s,o,u){return new Sm(e,t,s,o,u)}function qb(e){switch(e._tag){case"Done":return!1;case"Running":return e.interrupting;case"Suspended":return e.interrupting}}function Ob(e,t){switch(e._tag){case"Done":return e;case"Running":return new bm(t);case"Suspended":return new Sm(t,e.interruptible,e.asyncs,e.blockingOn,e.asyncTrace)}}var Jr={_tag:"Empty"},zb={_tag:"Pending"};function Wb(e){return{_tag:"Registered",asyncCanceler:e}}var vm=class{constructor(t,s,o,u,l,n){this.status=t,this.observers=s,this.suppressed=o,this.interruptors=u,this.asyncCanceler=l,this.mailbox=n,this._tag="Executing"}},Ba=class{constructor(t){this.value=t,this._tag="Done",this.suppressed=qt,this.status=Ab,this.interruptors=H()}};function Pt(e,t,s,o,u,l){return new vm(e,t,s,o,u,l)}function Tb(e){return new Ba(e)}function Ub(){return new vm(Zr(!1),xt(),qt,H(),Jr,void 0)}function $b(e){return qb(e.status)}function wm(e){return Lu(e.interruptors,qt,(t,s)=>Qt(t,os(s)))}function km(e){return e.internalMap.size}var ja=Symbol.for("@effect/core/io/FiberRefs");var Db,Pu=class{constructor(t){this.fiberRefLocals=t,this[Db]=ja}};Db=ja;function Va(e){return new Pu(e)}function Gb(e,t){return new vl((s,o)=>g(void 0,e(s,o)),t)}var U6={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER};var Em={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4},Bb={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4};var $6={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER};var Qa=z.make(()=>Wt(Em));var Xa=z.make(()=>Wt(xt()));function jb(){return new $t(new Map)}var Za=z.make(()=>Wt(jb()));function Mm(e){let t=new Map;for(let[s,o]of e.internalMap)t.set(s,o);return new $t(t)}function Ja(e,t){let s=Mm(e).internalMap;return s.delete(t),new $t(s)}function Yr(e,t,s){let o=Mm(e).internalMap;return o.set(t,s),new $t(o)}function tl(e){return e._initial}function el(e,t){return e.internalMap.has(t)?w(e.internalMap.get(t)):S}function Zb(e,t){return G0(e,t,!1)}function $0(e,t,s){for(;;){if(W(e))return lt();if(t(e.head)!==s)return P0(e,e.tail,t,s);e=e.tail}}function P0(e,t,s,o){for(;;){if(W(t))return e;if(s(t.head)!==o)t=t.tail;else return D0(e,t,s,o)}}function D0(e,t,s,o){let u=Y(he(e),lt()),l=lr(e),n=u;for(;l!==t;){let _=Y(he(l),lt());n.tail=_,n=_,l=l.tail}let m=t.tail,i=m;for(;!W(m);){let _=he(m);if(s(_)!==o)m=m.tail;else{for(;i!==m;){let a=Y(he(i),lt());n.tail=a,n=a,i=i.tail}i=m.tail,m=m.tail}}return W(i)||(n.tail=i),u}function G0(e,t,s){return $0(e,t,s)}function Jb(e,t){let s=e;for(;!W(s);)t(s.head),s=s.tail}function Yb(e,t){return Hu(e,"",(s,o)=>s.length>0?`${s}${t}${o}`:o)}function sl(e){return`effect-ts-fiber-${Yb(ls(Et(nm(e)),s=>`${s}`),",")}`}function Im(e,t){return e===t?!0:eu(e,!1,(s,o)=>w(s||N(o,t)))}function e2(e,t){switch(e._tag){case"Failure":return new ns(t(e.cause));case"Success":return e}}function s2(e){return e._fork}var Nm=Z0;function Z0(e,t){return s=>e._patch(t)(s)}var Du=z.make(()=>Wt(S,()=>S));function u2(e,t){return rt(e)?t():e}function Rm(e,t){switch(e._tag){case"None":return t;case"Runtime":switch(t._tag){case"None":return e;case"Runtime":return new $s(Ss([e,t]));case"Composite":return new $s(tt(t.fiberIds,e))}case"Composite":switch(t._tag){case"None":return e;case"Runtime":return new $s(tt(e.fiberIds,t));case"Composite":return new $s(ts(e.fiberIds,t.fiberIds))}}}function l2(e){return Lu(e,Tt,(t,s)=>Rm(t,s))}function n2(e){return kt(tu(e,t=>fn(t)&&t.trace!==Ut||hn(t)&&t.trace!==Ut||jo(t)&&t.trace!==Ut?w(void 0):S))}function i2(e,t){return en(Rm(e.fiberId,t.fiberId),ps(e.stackTrace,t.stackTrace))}function m2(e,t){return ru(e,()=>qt,(s,o)=>new ir(s,t(o)),(s,o)=>new js(s,t(o)),(s,o)=>new Vs(s,t(o)),(s,o)=>new Kt(s,o),(s,o)=>new es(s,o),(s,o)=>new Ks(s,o))}function _2(e,t){return m2(e,s=>i2(s,t))}function p2(e,t,s){return d(e,o=>v(t(),u=>g(o,u),s),s)}var lE="(@effect/core) _src/io/Supervisor/operations/and.ts";function a2(e,t){return new bs(p2(e.value,()=>t.value,lE+":14:19"),(s,o,u,l)=>{try{e.unsafeOnStart(s,o,u,l)}finally{t.unsafeOnStart(s,o,u,l)}},(s,o)=>{e.unsafeOnEnd(s,o),t.unsafeOnEnd(s,o)},(s,o)=>{e.unsafeOnEffect(s,o),t.unsafeOnEffect(s,o)},s=>{e.unsafeOnSuspend(s),t.unsafeOnSuspend(s)},s=>{e.unsafeOnSuspend(s),t.unsafeOnSuspend(s)})}function ol(e){return{value:e}}function c2(e,t,s){return e._diff(t,s)}function f2(e,t,s){return e._combine(t,s)}function Cm(e,t){if(W(e))return e;{let s=Y(t(e.head),lt()),o=s,u=e.tail;for(;!W(u);){let l=Y(t(u.head),lt());o.tail=l,o=l,u=u.tail}return s}}function h2(e,t){let s=e.fiberRefLocals,o=t.fiberRefLocals,u=Hu(Et(o),s,(l,{tuple:[n,m]})=>{let i=B(el(l,n),()=>xt()),_=pE(n,i,m),a=ge(nr(_.tail,g(_.head,xt()),({tuple:[f,b]},M)=>g(M,Y(c2(n,f,M),b))).get(1));if(W(a))return l;let p;if(W(i))p=S;else{let f=nr(a.tail,a.head,(X,at)=>f2(n,X,at)),{tuple:[b,M]}=i.head,T=i.tail;p=w(Y(g(b,Nm(n,f)(M)),T))}return Ct(p,()=>l,f=>Yr(l,n,f))});return new Pu(u)}function pE(e,t,s){return aE(ge(t),ge(s),tl(e),tl(e))}function aE(e,t,s,o){for(var u=e,l=t,n=s,m=o,i=e,_=t,a=s,p=o;;){if(W(u)||W(l))return Y(m,Cm(l,Vt=>Vt.get(1)));let{tuple:[f,b]}=u.head,M=u.tail,{tuple:[T,X]}=l.head,at=l.tail;if(N(f,T)){i=M,_=at,a=b,p=X,u=i,l=_,n=a,m=p;continue}return f.id<T.id?it(it(it(Cm(l,Vt=>Vt.get(1)),X),m),n):it(it(Cm(l,Vt=>Vt.get(1)),X),m)}}var Ya=class{constructor(){this.last=void 0,this.builder=go()}append(t){t!=null&&t!==this.last&&t!==Pg&&(this.builder.append(t),this.last=t)}build(){return this.builder.build()}};function x2(){return new Ya}var b2,R="(@effect/core) _src/io/Fiber/_internal/context.ts",g2=z.make(()=>Ua("effect_fiber_failure_causes")),cE=z.make(()=>Ua("effect_fiber_fork_locations")),fE=z.make(()=>ym("effect_fiber_started")),hE=z.make(()=>ym("effect_fiber_successes")),xE=z.make(()=>ym("effect_fiber_failures")),gE=z.make(()=>{let e=Mb(1,2,100);return Ib("effect_fiber_lifetimes",e)}),td=class{constructor(t,s){this.apply=t,this.trace=s,this._tag="InterruptExit"}},ed=class{constructor(t,s,o){this.finalizer=t,this.handleInterrupts=s,this.trace=o,this._tag="Finalizer"}apply(t){return this.handleInterrupts(),v(this.finalizer,()=>t,this.finalizer.trace)}},ul=class{constructor(t,s){this.apply=t,this.trace=s,this._tag="ApplyFrame"}},yE=new so(!1),y2=new dt(null),Gu=class{constructor(t,s,o,u,l){this._id=t,this.childFibers=s,this._tag="RuntimeFiber",this[b2]=En,this.state=new dt(Ub()),this.asyncEpoch=0,this.stack=void 0,this.nextEffect=void 0,this._location=this._id.location,this.interruptExit=new td(n=>this.unsafeIsInterruptible?(this.popInterruptStatus(),C(n,R+":391:43")):x(()=>(this.popInterruptStatus(),n),R+":394:23")),this.fiberRefLocals=o,this.runtimeConfig=u,this.interruptStatus=l,this.trackMetrics&&(fE.value.unsafeUpdate(1,H()),cE.value.unsafeUpdate(Dg(this._location),H()))}get fiberId(){return this._id}get _await(){return Vo(t=>{let s=u=>t(yt(()=>u,R+":115:67")),o=this.unsafeAddObserverMaybe(s);return o==null?Jt(x(()=>this.unsafeRemoveObserver(s),R+":119:37")):ye(C(o,R+":120:41"))},()=>this.fiberId,R+":114:43")}get _children(){return this._evalOnEffect(x(()=>{let t=go();for(let s of this.childFibers)t.append(s);return t.build()},R+":126:21"),x(()=>O(),R+":133:21"))}get _inheritRefs(){return I(()=>{if(km(this.fiberRefLocals)===0)return F;let t=Va(this.fiberRefLocals);return Gb((s,o)=>h2(o,t),R+":145:36")},R+":138:33")}get _poll(){return x(()=>this.unsafePoll(),R+":150:26")}_interruptAs(t){return this.unsafeInterruptAs(t)}get _scope(){return af(this)}get _status(){return x(()=>this.state.get.status,R+":168:26")}get _trace(){return x(()=>this.unsafeCaptureTrace([]),R+":172:26")}_evalOn(t,s){return I(()=>this.unsafeEvalOn(t)?F:qs(s,R+":180:60"),R+":179:33")}_evalOnEffect(t,s){return d(Nu(R+":188:30"),o=>d(nu(R+":189:20"),u=>j(this._evalOn(br(He(t,()=>o,R+":191:36"),()=>u,R+":191:62"),br(He(s,()=>o,R+":192:36"),()=>u,R+":192:62")),()=>u.await(R+":193:34"),R+":193:19"),R+":189:38"),R+":188:43")}unsafeGetDescriptor(){return{id:this.fiberId,status:this.state.get.status,interrupters:this.state.get.interruptors,interruptStatus:h_(this.unsafeIsInterruptible)}}get trackMetrics(){return is(this.runtimeConfig.value.flags,mf)}observeFailure(t){this.trackMetrics&&g2.value.unsafeUpdate(t,H())}unsafeLog(t,s){let o=this.unsafeGetRef(Qa.value),u=this.unsafeGetRef(Xa.value),l=this.unsafeGetRef(Za.value),n=this.unsafeGetRefs(this.fiberRefLocals);Re(this.runtimeConfig.value.loggers,m=>{m.apply(_e(s),this.fiberId,o,t,()=>qt,n,u,l)})}unsafeLogWith(t,s,o,u=null,l=null,n){let m=B(o,()=>this.unsafeGetRef(Qa.value)),i=this.unsafeGetRef(Xa.value),_=this.unsafeGetRef(Za.value),a=this.unsafeGetRefs(this.fiberRefLocals);u!=null&&(l==null?a=Ja(a,u):a=Yr(a,u,l)),Re(this.runtimeConfig.value.loggers,p=>{p.apply(_e(n),this.fiberId,m,t,s,a,i,_)})}get isStackEmpty(){return this.stack==null}pushContinuation(t){this.stack=new V(t,this.stack)}popContinuation(){if(this.stack){let t=this.stack.value;return this.stack=this.stack.previous,t}}unsafeNextEffect(t){if(!this.isStackEmpty){let s=this.popContinuation();return s._tag==="Fold"?s.success(t):s.apply(t)}return this.unsafeTryDone(wt(t))}unsafeUnwindStack(){let t=!0,s=!1;for(;t&&!this.isStackEmpty;){let o=this.popContinuation();switch(o._tag){case"InterruptExit":{this.popInterruptStatus();break}case"Finalizer":{this.unsafeDisableInterrupting(),this.pushContinuation(new ul(u=>Ot(o.finalizer,l=>(this.popInterruptStatus(),this.unsafeAddSuppressed(l),te(u,R+":352:45")),()=>(this.popInterruptStatus(),te(u,R+":356:45")),R+":348:46"))),t=!1;break}case"Fold":{this.unsafeShouldInterrupt?s=!0:(this.pushContinuation(new ul(o.failure,o.trace)),t=!1);break}}}return s}pushInterruptStatus(t){this.interruptStatus=new V(t,this.interruptStatus)}popInterruptStatus(){if(this.interruptStatus){let t=this.interruptStatus.value;return this.interruptStatus=this.interruptStatus.previous,t}}unsafeInterruptAs(t){let s=os(t);return I(()=>{let o=this.state.get;if(o._tag==="Executing"&&o.status._tag==="Suspended"&&o.status.interruptible&&o.asyncCanceler._tag==="Registered"){let u=Pt(Zr(!0),o.observers,o.suppressed,tt(o.interruptors,t),Jr,o.mailbox);this.state.set(u);let l=U(()=>s,R+":438:43"),n=o.asyncCanceler.asyncCanceler,m=n===F?l:j(n,()=>l,R+":440:90");this.unsafeRunLater(m)}else if(o._tag==="Executing"){let u=Qt(o.suppressed,s),l=Pt(o.status,o.observers,u,tt(o.interruptors,t),o.asyncCanceler,o.mailbox);this.state.set(l)}return this._await},R+":418:33")}unsafeSetInterrupting(t){let s=this.state.get;s._tag==="Executing"&&this.state.set(Pt(Ob(s.status,t),s.observers,s.suppressed,s.interruptors,s.asyncCanceler,s.mailbox))}unsafeDisableInterrupting(){this.interruptStatus=new V(!1,this.interruptStatus)}unsafeRestoreInterrupt(){this.stack=new V(this.interruptExit,this.stack)}get unsafeIsInterrupted(){return Bs(this.state.get.interruptors)>0}get unsafeIsInterruptible(){return this.interruptStatus?this.interruptStatus.value:!0}get unsafeIsInterrupting(){return $b(this.state.get)}get unsafeShouldInterrupt(){return this.unsafeIsInterrupted&&this.unsafeIsInterruptible&&!this.unsafeIsInterrupting}unsafeGetRef(t){return B(im(el(this.fiberRefLocals,t),s=>s.head.get(1)),()=>tl(t))}unsafeGetRefs(t){let s=[];for(let{tuple:[o,u]}of t)s.push(g(o,u.head.get(1)));return Vr(s)}unsafeSetRef(t,s){let o=B(el(this.fiberRefLocals,t),()=>xt()),u=W(o)?Y(g(this._id,s),lt()):Y(g(this._id,s),o.tail);this.fiberRefLocals=Yr(this.fiberRefLocals,t,u)}unsafeDeleteRef(t){this.fiberRefLocals=Ja(this.fiberRefLocals,t)}unsafeAddObserverMaybe(t){let s=this.state.get;switch(s._tag){case"Executing":{this.state.set(Pt(s.status,it(s.observers,t),s.suppressed,s.interruptors,s.asyncCanceler,s.mailbox));return}case"Done":return s.value}}unsafeRemoveObserver(t){let s=this.state.get;if(s._tag==="Executing"){let o=Zb(s.observers,u=>u!==t);this.state.set(Pt(s.status,o,s.suppressed,s.interruptors,s.asyncCanceler,s.mailbox))}}unsafeNotifyObservers(t,s){if(Ie(s)>0){let o=wt(t);Jb(s,u=>u(o))}}unsafeReportUnhandled(t,s){if(t._tag==="Failure")try{this.unsafeLogWith(()=>`Fiber ${sl(this.fiberId)} did not handle an error`,()=>t.cause,w(Bb),null,null,s)}catch(o){this.runtimeConfig.value.fatal(o)?this.runtimeConfig.value.reportFatal(o):console.log(`An exception was thrown by a logger:
${o}`)}}unsafeAddSuppressed(t){if(!Wc(t)){let s=this.state.get;if(s._tag==="Executing"){let o=Pt(s.status,s.observers,Qt(s.suppressed,t),s.interruptors,s.asyncCanceler,s.mailbox);this.state.set(o)}}}unsafeClearSuppressed(){let t=this.state.get;switch(t._tag){case"Executing":{let s=Pt(t.status,t.observers,qt,t.interruptors,t.asyncCanceler,t.mailbox);this.state.set(s);let o=wm(t);return Im(t.suppressed,o)?t.suppressed:Qt(t.suppressed,o)}case"Done":return wm(t)}}unsafeAddChild(t){return this.unsafeEvalOn(x(()=>this.childFibers.add(t),R+":665:44"))}unsafePoll(){let t=this.state.get;return t._tag==="Done"?w(t.value):S}unsafeCaptureTrace(t){let s=x2();if(t.forEach(o=>s.append(o)),this.stack!=null){let o=this.stack,u=[o.value],l=o.previous;for(;l!=null;)u.unshift(l.value),l=l.previous;u.forEach(n=>s.append(_e(n.trace)))}return new sr(this.fiberId,s.build())}unsafeEnterAsync(t,s,o){let u=this.state.get;if(u._tag==="Executing"&&u.status._tag==="Running"&&u.asyncCanceler._tag==="Empty"){let l=Lb(u.status.interrupting,this.unsafeIsInterruptible&&!this.unsafeIsInterrupting,t,s,o),n=Pt(l,u.observers,u.suppressed,u.interruptors,zb,u.mailbox);this.state.set(n)}else throw new $l(`Fiber ${sl(this.fiberId)} is not running`)}unsafeExitAsync(t){let s=this.state.get;if(s._tag==="Executing"&&s.status._tag==="Suspended"&&s.status.asyncs===t){let o=Pt(Zr(s.status.interrupting),s.observers,s.suppressed,s.interruptors,Jr,s.mailbox);return this.state.set(o),!0}return!1}unsafeCreateAsyncResume(t){return s=>{this.unsafeExitAsync(t)&&this.unsafeRunLater(s)}}unsafeSetAsyncCanceler(t,s){let o=this.state.get,u=s??F;if(o._tag==="Executing"&&o.status._tag==="Suspended"&&o.asyncCanceler._tag==="Pending"&&t===o.status.asyncs)this.state.set(Pt(o.status,o.observers,o.suppressed,o.interruptors,Wb(u),o.mailbox));else if(o._tag==="Executing"&&o.status._tag==="Suspended"&&o.asyncCanceler._tag==="Registered"&&t===o.status.asyncs)throw new Error("Bug, inconsistent state in unsafeSetAsyncCanceler")}unsafeAddFinalizer(t){this.pushContinuation(new ed(t,()=>{this.unsafeDisableInterrupting(),this.unsafeRestoreInterrupt()}))}unsafeEvalOn(t){let s=this.state.get;switch(s._tag){case"Executing":{let o=s.mailbox==null?t:j(s.mailbox,()=>t,R+":823:89");return this.state.set(Pt(s.status,s.observers,s.suppressed,s.interruptors,s.asyncCanceler,o)),!0}case"Done":return!1}}unsafeTryDone(t){let s=this.state.get;switch(s._tag){case"Executing":if(s.mailbox!=null){let o=Pt(s.status,s.observers,s.suppressed,s.interruptors,s.asyncCanceler,void 0);return this.state.set(o),this.unsafeSetInterrupting(!0),j(s.mailbox,()=>yt(()=>t,R+":864:67"),R+":864:55")}else if(this.childFibers.size===0){let o=wm(s),u=o===qt?t:e2(t,i=>Im(i,o)?i:Qt(i,o));this.state.set(Tb(u)),this.unsafeReportUnhandled(u),this.unsafeNotifyObservers(u,s.observers);let l=this._id.startTimeSeconds,m=new Date().getTime()/1e3-l;this.trackMetrics&&gE.value.unsafeUpdate(m,H()),me(u,i=>(this.trackMetrics&&xE.value.unsafeUpdate(1,H()),ru(i,()=>g2.value.unsafeUpdate("<empty>",H()),(_,a)=>{this.observeFailure(typeof _=="object"?_.constructor.name:"<anonymous>")},(_,a)=>{this.observeFailure(typeof _=="object"?_.constructor.name:"<anonymous>")},()=>{this.observeFailure("InterruptedException")},Ao,Ao,Ao)),()=>{this.trackMetrics&&hE.value.unsafeUpdate(1,H())});return}else{this.unsafeSetInterrupting(!0);let o=F;for(let u of this.childFibers)o=j(o,()=>u._interruptAs(this._id),R+":931:59");return this.childFibers.clear(),j(o,()=>yt(()=>t,R+":936:68"),R+":936:56")}case"Done":return}}unsafeDrainMailbox(){let t=this.state.get;switch(t._tag){case"Executing":{let s=Pt(t.status,t.observers,t.suppressed,t.interruptors,t.asyncCanceler,void 0);return this.state.set(s),t.mailbox}case"Done":return}}unsafeOnDone(t){let s=this.unsafeAddObserverMaybe(t);s!=null&&t(wt(s))}unsafeFork(t,s,o=S){let u=sm(s),l=[];for(let{tuple:[p,f]}of this.fiberRefLocals){let b=Nm(p,s2(p))(f.head.get(1));l.push(g(p,it(f,g(u,b))))}let n=Vr(l),m=B(u2(o,()=>this.unsafeGetRef(Du.value)),()=>this._scope),i=new Set,_=new Gu(u,i,n,this.runtimeConfig,new V(this.interruptStatus?this.interruptStatus.value:!0));this.runtimeConfig.value.supervisor!==ao&&(this.runtimeConfig.value.supervisor.unsafeOnStart(this.unsafeGetRef(we.value),t,w(this),_),_.unsafeOnDone(p=>this.runtimeConfig.value.supervisor.unsafeOnEnd(Au(p),_)));let a=m.unsafeAdd(this.runtimeConfig,_,R+":1024:47")?t:su(()=>m.fiberId,R+":1025:27");return _.nextEffect=a,_o(()=>_.runUntil(this.runtimeConfig.value.maxOp)),_}complete(t,s,o,u,l){u.compareAndSet(!0,!1)&&l(o(t,s))}unsafeRace(t,s){let o=new so(!0),u=this.unsafeFork(t.left(),s),l=this.unsafeFork(t.right(),s);return $x(n=>{u.unsafeAddObserverMaybe(()=>this.complete(u,l,t.leftWins,o,n))!=null?this.complete(u,l,t.leftWins,o,n):l.unsafeAddObserverMaybe(()=>this.complete(l,u,t.rightWins,o,n))!=null&&this.complete(l,u,t.rightWins,o,n)},l2(Ss([u.fiberId,l.fiberId])),R+":1056:34")}unsafeRunLater(t){this.nextEffect=t,_o(()=>this.runUntil(this.runtimeConfig.value.maxOp))}runUntil(t){try{let s=this.runtimeConfig.value.flags,o=is(s,lf),u=this.nextEffect;this.nextEffect=void 0;let l=is(s,nf)&&this.runtimeConfig.value.supervisor!==ao;for(is(s,k_)&&y2.set(this),this.runtimeConfig.value.supervisor!==ao&&this.runtimeConfig.value.supervisor.unsafeOnResume(this);u!=null;)try{let n=0;do{if(this.unsafeShouldInterrupt){let m=u.trace;u=U(()=>this.unsafeClearSuppressed(),m),this.unsafeSetInterrupting(!0)}else{let m=this.unsafeDrainMailbox();if(m!=null){let i=u;u=d(m,()=>i,R+":1118:54")}else if(n===t)this.unsafeRunLater(u),u=void 0;else switch(o&&this.unsafeLog(()=>u.unsafeLog(),u.trace),l&&this.runtimeConfig.value.supervisor.unsafeOnEffect(this,u),u._tag){case"FlatMap":{this.pushContinuation(new ul(u.k,u.trace)),u=u.effect;break}case"SucceedNow":{u=this.unsafeNextEffect(u.value);break}case"Succeed":{u=this.unsafeNextEffect(u.effect());break}case"SucceedWith":{u=this.unsafeNextEffect(u.effect(this.runtimeConfig,this._id));break}case"Fail":{let i=u.cause(),_=n2(i)?i:_2(i,this.unsafeCaptureTrace([_e(u.trace)])),p=this.unsafeUnwindStack()?vr(_):_,f=this.unsafeClearSuppressed(),b=Im(p,f)?p:Qt(p,f);this.isStackEmpty?(this.unsafeSetInterrupting(!0),u=this.unsafeTryDone(Yt(b))):(this.unsafeSetInterrupting(!1),u=this.unsafeNextEffect(b));break}case"Fold":{let i=u;u=i.effect,this.pushContinuation(i);break}case"Suspend":{u=u.make();break}case"SuspendWith":{u=u.make(this.runtimeConfig,this._id);break}case"InterruptStatus":{let i=u.flag().toBoolean;(this.interruptStatus?this.interruptStatus.value:!0)!==i&&(this.interruptStatus=new V(i,this.interruptStatus),this.unsafeRestoreInterrupt()),u=u.effect;break}case"CheckInterrupt":{u=u.k(h_(this.unsafeIsInterruptible));break}case"Async":{let i=u,_=this.asyncEpoch;this.asyncEpoch=_+1,this.unsafeEnterAsync(_,i.blockingOn(),_e(i.trace));let a=i.register,p=a(this.unsafeCreateAsyncResume(_));switch(p._tag){case"Left":{let f=p.left;this.unsafeSetAsyncCanceler(_,f),this.unsafeShouldInterrupt&&this.unsafeExitAsync(_)?(this.unsafeSetInterrupting(!0),u=j(f,()=>U(()=>this.unsafeClearSuppressed(),R+":1261:49"),R+":1260:48")):u=void 0;break}case"Right":{this.unsafeExitAsync(_)?u=p.right:u=void 0;break}}break}case"Fork":{let i=u;u=this.unsafeNextEffect(this.unsafeFork(i.effect,_e(i.trace),i.scope()));break}case"Descriptor":{u=u.f(this.unsafeGetDescriptor());break}case"Yield":{this.unsafeRunLater(F),u=void 0;break}case"Trace":{u=this.unsafeNextEffect(this.unsafeCaptureTrace([_e(u.trace)]));break}case"FiberRefModify":{let{tuple:[i,_]}=u.f(this.unsafeGetRef(u.fiberRef));this.unsafeSetRef(u.fiberRef,_),u=this.unsafeNextEffect(i);break}case"FiberRefModifyAll":{let{tuple:[i,_]}=u.f(this._id,Va(this.fiberRefLocals));this.fiberRefLocals=_.fiberRefLocals,u=this.unsafeNextEffect(i);break}case"FiberRefLocally":{let i=u,_=i.fiberRef,a=this.unsafeGetRef(_);this.unsafeSetRef(_,i.localValue),u=Gi(i.effect,()=>x(()=>this.unsafeSetRef(_,a),R+":1351:39"),R+":1350:45");break}case"FiberRefDelete":{this.unsafeDeleteRef(u.fiberRef),u=this.unsafeNextEffect(void 0);break}case"FiberRefWith":{u=u.f(this.unsafeGetRef(u.fiberRef));break}case"RaceWith":{u=this.unsafeRace(u,_e(u.trace));break}case"Supervise":{let i=u,_=this.runtimeConfig.value.supervisor,a=a2(i.supervisor(),_);this.runtimeConfig=ol({...this.runtimeConfig.value,supervisor:a}),this.unsafeAddFinalizer(x(()=>{this.runtimeConfig=ol({...this.runtimeConfig.value,supervisor:_})},R+":1390:37")),u=i.effect;break}case"GetForkScope":{u=u.f(B(this.unsafeGetRef(Du.value),()=>this._scope));break}case"OverrideForkScope":{let i=this.unsafeGetRef(Du.value);this.unsafeSetRef(Du.value,u.forkScope),this.unsafeAddFinalizer(x(()=>this.unsafeSetRef(Du.value,i),R+":1428:37")),u=u.effect;break}case"Ensuring":{this.unsafeAddFinalizer(u.finalizer),u=u.effect;break}case"Logged":{let i=u;this.unsafeLogWith(i.message,i.cause,i.overrideLogLevel,i.overrideRef1,i.overrideValue1,i.trace),u=this.unsafeNextEffect(void 0);break}case"SetRuntimeConfig":{this.runtimeConfig=u.runtimeConfig,u=F;break}}}n=n+1}while(u!=null)}catch(n){if(n instanceof Fs){let m=u?.trace;u=su(()=>Tt,m),this.unsafeSetInterrupting(!0)}else if(n instanceof al.Error)switch(n.exit._tag){case"Success":{u=this.unsafeNextEffect(n.exit.value);break}case"Failure":{let m=u?u.trace:void 0;u=U(()=>n.exit.cause,m);break}}else this.runtimeConfig.value.fatal(n)?(yE.set(!0),this.runtimeConfig.value.reportFatal(n),u=void 0):(this.unsafeSetInterrupting(!0),u=qn(()=>n,R+":1517:45"))}}finally{is(this.runtimeConfig.value.flags,k_)&&y2.set(null),this.runtimeConfig.value.supervisor!==ao&&this.runtimeConfig.value.supervisor.unsafeOnSuspend(this)}}run(){return this.runUntil(this.runtimeConfig.value.maxOp)}};b2=En;var Bu="(@effect/core) _src/io/Runtime/definition.ts",Am=class{constructor(t,s){this.environment=t,this.runtimeConfig=s,this.unsafeRunWith=(o,u,l)=>{let n=sm(_e(l)),m=new Set,i=this.runtimeConfig.value.supervisor,_=sy(g(we.value,Y(g(n,this.environment),lt())),g(ty.value,Y(g(n,Yg.value),lt()))),a=new Gu(n,m,_,this.runtimeConfig,new V(kn.toBoolean));return In.value.unsafeAdd(this.runtimeConfig,a,Bu+":32:38"),i!==ao&&(i.unsafeOnStart(this.environment,o,S,a),a.unsafeOnDone(p=>i.unsafeOnEnd(Au(p),a))),a.nextEffect=o,a.run(),a.unsafeOnDone(p=>{u(Au(p))}),p=>f=>this.unsafeRunAsyncWith(a._interruptAs(p),b=>f(Au(b)),Bu+":46:50")},this.unsafeRunAsync=(o,u)=>this.unsafeRunAsyncWith(o,Ao,Bu+":56:35"),this.unsafeRunAsyncWith=(o,u,l)=>{this.unsafeRunWith(o,u,Bu+":71:23")},this.unsafeRunPromise=(o,u)=>new Promise((l,n)=>{this.unsafeRunAsyncWith(o,m=>{switch(m._tag){case"Success":{l(m.value);break}case"Failure":{n(dy(m.cause,st));break}}},Bu+":87:30")}),this.unsafeRunPromiseExit=(o,u)=>new Promise(l=>{this.unsafeRunAsyncWith(o,n=>{l(n)},Bu+":114:30")})}};var SE="(@effect/core) _src/io/Supervisor/operations/track.ts",S2=wE;var vE=2**31-1;function wE(){let e=new Set,t=new dt(void 0);return new bs(x(()=>Et(e),SE+":23:19"),(s,o,u,l)=>{e.has(l)?t.get==null&&t.set(setInterval(()=>{},vE)):e.add(l)},(s,o)=>{if(e.delete(o),e.size===0){let u=t.get;u&&clearInterval(u)}})}var v2=ub(Wu,e=>e.ordinal);function w2(e,t){return!ob(v2)(e,t)}function k2(e,t){return`${e.label.indexOf(" ")<0?e.label:`"${e.label}"`}=${t-e.startTime}ms`}var E2={apply:(e,t,s,o,u,l,n,m)=>{let i=u(),_=new Date,a=_.getTime(),p=[`timestamp=${_.toISOString()}`,` level=${s.label}`,` thread=#${sl(t)}`,` message="${o()}"`].join("");if(i!=null&&i!=qt,Ie(n)>0){p=p+" ";let f=!0;for(let b of n)f?f=!1:p=p+" ",p=p+k2(b,a)}if(e._tag==="SourceLocation"){let f=`${e.fileName}:${e.lineNumber}:${e.columnNumber}`;p=p+" location=",p=sd(f,p)}if(km(m)>0){p=p+" ";let f=!0;for(let{tuple:[b,M]}of m)f?f=!1:p=p+" ",p=sd(b,p),p=p+"=",p=sd(M,p)}return p}};function sd(e,t){return e.indexOf(" ")<0?t+e:t+`"${e}"`}function M2(e,t){return{apply:(s,o,u,l,n,m,i,_)=>t(e.apply(s,o,u,l,n,m,i,_))}}function I2(e,t){return{apply:(s,o,u,l,n,m,i,_)=>t(u)?w(e.apply(s,o,u,l,n,m,i,_)):S}}function Lm(e){return{flags:e}}var R2=Lm(H());function C2(e,t){return Lm(tt(e.flags,t))}var qE=ol({fatal:()=>!1,reportFatal:e=>{throw e},supervisor:S2(),loggers:Do(I2(M2(E2,e=>console.log(e)),e=>w2(e,Em))),flags:C2(R2,Mn),maxOp:2048});var rl=new Am(mt.empty,qE),A2=rl.unsafeRunPromise,lR=rl.unsafeRunAsync,nR=rl.unsafeRunAsyncWith,iR=rl.unsafeRunPromiseExit,mR=rl.unsafeRunWith;var ws="(@effect/html) _src/io/Render.ts";function od(e,t,s){return v(wr(s),o=>Vu(e,t,o),ws+":30:37")}function L2(e){let t=fs();return Object.assign((s,...o)=>od(e,s,o),{for(s,o){return(u,...l)=>d(Lp(),n=>{if(n){let m=xu(t,s,()=>oo(t,s,Ye()));return B(i1(m,o),()=>{let _=gu();return n1(oo(t,s,Ne(m,o,l1(_))),o)})(e,u,l)}return od(e,u,l)},ws+":68:40")},node:(s,...o)=>d(Lp(),u=>u?v(v(wr(o),l=>Vu(e,s,l),ws+":95:49"),l=>{let n=gu(),m=ro(n,l);return uo(m)?Ir(m):m.valueOf()},ws+":96:21"):od(e,s,o),ws+":92:38")})}function q2(e,t){return Hg(ig(()=>t,s=>T1(x(()=>{let o=xu(qp,e,()=>oo(qp,e,gu())),u=kr(s)?ro(o,s):s;return u!==A1(o)&&(L1(o,u),e.replaceChildren(uo(u)?Ir(u):u.valueOf())),e},ws+":123:21"),ws+":138:15")),C1("DOM"),ws+":139:21")}var ll=L2("html"),_R=L2("svg");var O2="C:/Users/t/Desktop/Programmieren/Effect/Effect-2/solid-2/apps/src/index.ts",zE=ll` <div>Here's my main page.</div> `,WE=ll`<div>Here's my main page4.</div>`,HE=ll` ${zE} ${WE} `,TE=v(q2(document.body,ll` ${HE}`),()=>{},O2+":11:4");A2(TE,O2+":14:25");
//# sourceMappingURL=index.js.map
